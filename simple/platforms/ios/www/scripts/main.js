!function e(t,r,n){function i(s,u){if(!r[s]){if(!t[s]){var c="function"==typeof require&&require;if(!u&&c)return c(s,!0);if(o)return o(s,!0);throw new Error("Cannot find module '"+s+"'")}var a=r[s]={exports:{}};t[s][0].call(a.exports,function(e){var r=t[s][1][e];return i(r?r:e)},a,a.exports,e,t,r,n)}return r[s].exports}for(var o="function"==typeof require&&require,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(e){"use strict";e("./extensions/capitalize.coffee"),e("./modules/preloader.coffee"),e("./modules/syncfocus.coffee"),angular.module("simplecareersApp",["ui.router","restangular","famous.angular","LocalStorageModule","preloader","syncFocusWith"]).config(["$locationProvider","RestangularProvider","$stateProvider","$urlRouterProvider","$famousStateProvider","$famousUrlRouterProvider",function(e,t,r,n){return e.html5Mode(!1),t.setRestangularFields({id:"objectId"}),t.setBaseUrl("https://api.parse.com/1/"),t.setDefaultHeaders({"X-Parse-Application-Id":"WFC9425UM5gV4wMLcWolWP45RlanlwaoMBT2H5Mm","X-Parse-REST-API-Key":"cZ4iL7TOatIAZAzsrOe9n69HlI75jlGYyQHoAzj8"}),t.addResponseInterceptor(function(){return function(e,t){return"getList"===t?e.results:e}}(this)),n.otherwise("/login"),r.state("login",{url:"/login",views:{main:{templateUrl:"./views/login/login.html",controller:"LoginCtrl"}}}).state("profile",{url:"/profile",views:{main:{templateUrl:"./views/profile/profile.html",controller:"ProfileCtrl"}}}).state("job",{url:"/job",views:{main:{templateUrl:"./views/job/job.html",controller:"JobCtrl"}}}).state("detail",{url:"/detail",views:{main:{templateUrl:"./views/detail/detail.html",controller:"DetailCtrl"}}})}]),e("./controllers/app.coffee"),e("./controllers/login/login.coffee"),e("./controllers/profile/profile.coffee"),e("./controllers/detail/detail.coffee"),e("./controllers/detail/card.coffee"),e("./controllers/detail/question.coffee"),e("./controllers/job/job.coffee"),e("./controllers/job/jobcard.coffee"),e("./controllers/job/tutorial.coffee"),angular.bootstrap(document,["simplecareersApp"])},{"./controllers/app.coffee":2,"./controllers/detail/card.coffee":4,"./controllers/detail/detail.coffee":5,"./controllers/detail/question.coffee":6,"./controllers/job/job.coffee":7,"./controllers/job/jobcard.coffee":8,"./controllers/job/tutorial.coffee":9,"./controllers/login/login.coffee":10,"./controllers/profile/profile.coffee":11,"./extensions/capitalize.coffee":13,"./modules/preloader.coffee":15,"./modules/syncfocus.coffee":16}],2:[function(e){"use strict";var t,r,n,i,o=function(e,t){return function(){return e.apply(t,arguments)}},s={}.hasOwnProperty,u=function(e,t){function r(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};r=e("./ctrl.coffee"),n=e("async"),i=e("triangle-homography"),t=function(e){function t(e,r,n,i,s,u,c,a,f,h,p){var l,m,d,g;for(this.scope=e,this.stateParams=r,this.state=n,this.Restangular=i,this.timeout=s,this.famous=u,this.window=c,this.http=a,this.localStorageService=f,this.preloader=h,this.famousState=p,this.loadAngelUser=o(this.loadAngelUser,this),this.getPagePosition=o(this.getPagePosition,this),this.nextPage=o(this.nextPage,this),this.prevPage=o(this.prevPage,this),this.goToPage=o(this.goToPage,this),this.changePageTo=o(this.changePageTo,this),this.switchTo=o(this.switchTo,this),this.getButtonOpacity=o(this.getButtonOpacity,this),this.applyIconScroll2=o(this.applyIconScroll2,this),this.jobIconScroll2=o(this.jobIconScroll2,this),this.profileIconScroll2=o(this.profileIconScroll2,this),this.applyIconScroll=o(this.applyIconScroll,this),this.jobIconScroll=o(this.jobIconScroll,this),this.profileIconScroll=o(this.profileIconScroll,this),this.menuScroll=o(this.menuScroll,this),this.stay=o(this.stay,this),this.setPagePos=o(this.setPagePos,this),this.movePage=o(this.movePage,this),this.clamp=o(this.clamp,this),this.pageSyncEnd=o(this.pageSyncEnd,this),this.pageSyncUpdate=o(this.pageSyncUpdate,this),this.pageSyncStart=o(this.pageSyncStart,this),this.signOut=o(this.signOut,this),this.processCard=o(this.processCard,this),this.saveLike=o(this.saveLike,this),this.saveApplies=o(this.saveApplies,this),this.getUser=o(this.getUser,this),this.loadRoles=o(this.loadRoles,this),this.loadCard=o(this.loadCard,this),this.isLogin=o(this.isLogin,this),t.__super__.constructor.call(this,this.scope),this.scope.showMenu=!1,this.scope.$on("showMenu",function(e){return function(){return e.scope.showMenu=!0}}(this)),this.scope.$on("hideMenu",function(e){return function(){return e.scope.showMenu=!1}}(this)),this.scope.$on("page",function(e){return function(t,r){return e.scope.goToPage(r)}}(this)),this.scope.screenWidth=$(c).width(),this.scope.screenHeight=$(c).height(),$(c).resize(function(e){return function(){return e.scope.screenWidth=$(c).width(),e.scope.screenHeight=$(c).height()}}(this)),this.scope.menuScrollT=new this.Transitionable(1),this.scope.profileIconScrollT=new this.Transitionable(1),this.scope.jobIconScrollT=new this.Transitionable(1),this.scope.applyIconScrollT=new this.Transitionable(1),this.scope.profileIconScrollT2=new this.Transitionable(1),this.scope.jobIconScrollT2=new this.Transitionable(1),this.scope.applyIconScrollT2=new this.Transitionable(1),this.scope.enginePipe=new this.EventHandler,this.Engine.pipe(this.scope.enginePipe),this.scope.options={mainScrollView:{paginated:!0,direction:0,speedLimit:5,margin:1e4}},m=new this.GenericSync(["mouse","touch"]),this.scope.enginePipe.pipe(m),m.on("start",this.pageSyncStart),m.on("end",this.pageSyncEnd),m.on("update",this.pageSyncUpdate),this.scope.currentPage=0,this.numPages=5,this.pages=[],l=d=0,g=this.numPages;g>=0?g>=d:d>=g;l=g>=0?++d:--d)this.pages.push({pos:new this.Transitionable([this.scope.screenWidth*l,0,0])});this.zSeparation=50,this.mode="scale",this.applicationMode="Like",this.applicationModeOpacity={Like:new this.Transitionable(1),Applied:new this.Transitionable(.5),Approved:new this.Transitionable(.5)}}return u(t,e),t.$inject=["$scope","$stateParams","$state","Restangular","$timeout","$famous","$window","$http","localStorageService","preloader","$famousState"],t.prototype.isLogin=function(){var e,t,r;return e=this.localStorageService.get("accessToken"),t=this.localStorageService.get("sessionToken"),r=this.localStorageService.get("userId"),e&&t&&r},t.prototype.loadCard=function(e,t){var r;return r=this.http.get(""+this.baseUrl+"/angel/jobs/"+e,{},{cache:!0}),r.error(function(){return function(e){return"function"==typeof t?t(e,null):void 0}}(this)),r.success(function(e){return function(r){return e.processCard(r,function(){return"function"==typeof t?t(null,r):void 0})}}(this))},t.prototype.loadRoles=function(e){var t;return t=this.http.get(""+this.baseUrl+"/angel/startups/"+e.startup.id+"/roles",{},{cache:!0}),t.success(function(){return function(t){var r;return r=t.startup_roles,e.founders=_.where(r,{role:"founder"}),e.investors=_.where(r,{role:"past_investor"}),e.advisors=_.where(r,{role:"advisor"}),"function"==typeof cb?cb(e):void 0}}(this)),t.error(function(){return function(){return"function"==typeof cb?cb(null):void 0}}(this))},t.prototype.getUser=function(e){var t,r,n;return this.scope.parseUser?void("function"==typeof e&&e(null,this.scope.parseUser)):(n=this.localStorageService.get("userId"),t=this.localStorageService.get("sessionToken"),r=this.Restangular.one("users",n),r.get({},{"X-Parse-Session-Token":t}).then(function(t){return function(r){return t.scope.parseUser=r,"function"==typeof e?e(null,r):void 0}}(this),function(){return function(t){return"function"==typeof e?e(t):void 0}}(this)))},t.prototype.saveApplies=function(e){var t,r,n,i,o,s,u;return null!=(o=this.scope.parseUser)&&null==o.applies&&(o.applies=[]),t=_.where(null!=(s=this.scope.parseUser)?s.applies:void 0,e.id),0===t.length&&null!=(u=this.scope.parseUser)&&u.applies.push(e.id),r=this.localStorageService.get("sessionToken"),i=this.localStorageService.get("userId"),r&&i?(n=this.Restangular.one("users",i),n.applies={__op:"AddUnique",objects:[e.id]},n.put({},{"X-Parse-Session-Token":r}).then(function(){return function(){}}(this))):void 0},t.prototype.saveLike=function(e){var t,r,n,i,o,s,u;return null!=(o=this.scope.parseUser)&&null==o.likes&&(o.likes=[]),t=_.where(null!=(s=this.scope.parseUser)?s.likes:void 0,e.id),0===t.length&&null!=(u=this.scope.parseUser)&&u.likes.push(e.id),r=this.localStorageService.get("sessionToken"),i=this.localStorageService.get("userId"),r&&i?(n=this.Restangular.one("users",i),n.likes={__op:"AddUnique",objects:[e.id]},n.put({},{"X-Parse-Session-Token":r}).then(function(){return function(){}}(this))):void 0},t.prototype.processCard=function(e,t){var r;return r=this.http.get(""+this.baseUrl+"/angel/startups/"+e.startup.id+"/",{},{cache:!0}),r.success(function(r){return function(n){var i,o,s,u;return e.startup=n,e.location=null!=(i=n.locations)&&null!=(o=i[0])?o.display_name:void 0,e.screenshot=(null!=(s=n.screenshots)&&null!=(u=s[0])?u.thumb:void 0)||n.logo_url,r.loadRoles(e),"function"==typeof t?t(e):void 0}}(this)),r.error(function(){return function(){return"function"==typeof t?t(null):void 0}}(this))},t.prototype.signOut=function(){return this.scope.status="notavailable",this.localStorageService.clearAll(),this.scope.user=void 0,this.scope.goToPage(0)},t.prototype.pageSyncStart=function(){},t.prototype.pageSyncUpdate=function(e){var t;return t=e.position[0],Math.abs(t)>40?this.movePage(e):void 0},t.prototype.pageSyncEnd=function(e){var t,r;if(r=e.velocity[0],t=e.position[0],!(Math.abs(t)<40))if(r>.5||t>80){if(!this.prevPage())return this.stay()}else{if(!(-.5>r||-80>t))return this.stay();if(!this.nextPage())return this.stay()}},t.prototype.clamp=function(e,t,r){return Math.min(Math.max(e,t),r)},t.prototype.movePage=function(e){var t,r,n,i,o,s,u,c,a,f,h;for(r=e.delta[0],o=e.position[0],i=e.offsetX,h=[],n=c=a=this.scope.currentPage,f=this.numPages;f>=a?f>c:c>f;n=f>=a?++c:--c)t=this.pages[n].pos.get(),n===this.scope.currentPage&&("scale"===this.mode?(u=this.clamp(t[2]+r,-this.zSeparation,0),0===u&&(this.mode="translate"),this.setPagePos(n,[t[0],t[1],u])):(s=this.clamp(t[0]+r,0,0===this.scope.currentPage?0:this.scope.screenWidth),0===s&&(this.mode="scale"),this.setPagePos(n,[s,t[1],t[2]]))),n===this.scope.currentPage+1?(s=this.clamp(t[0]+r,this.scope.screenWidth*(n-this.scope.currentPage-1),this.scope.screenWidth*(n-this.scope.currentPage+1)),h.push(this.setPagePos(n,[s,t[1],t[2]]))):h.push(void 0);return h},t.prototype.setPagePos=function(e,t,r,n){var i;return 1===e&&t[0]<=this.scope.screenWidth&&this.scope.menuScrollT.set(t[0]/this.scope.screenWidth,r,n),2===e&&t[0]<=this.scope.screenWidth&&(i=t[0]/this.scope.screenWidth,this.scope.profileIconScrollT.set(i,r,n),this.scope.jobIconScrollT.set(i,r,n),this.scope.applyIconScrollT.set(i,r,n)),3===e&&t[0]<=this.scope.screenWidth&&(i=t[0]/this.scope.screenWidth,this.scope.profileIconScrollT2.set(i,r,n),this.scope.jobIconScrollT2.set(i,r,n),this.scope.applyIconScrollT2.set(i,r,n)),this.pages[e].pos.set(t,r,n)},t.prototype.stay=function(){var e,t,r,n,i,o,s;for(s=[],t=i=0,o=this.numPages;o>=0?o>i:i>o;t=o>=0?++i:--i)e=this.pages[t].pos.get(),t<=this.scope.currentPage?(n=-this.zSeparation*(this.scope.currentPage-t),s.push(this.setPagePos(t,[0,0,n],{duration:300},function(){return function(){}}(this)))):(r=this.scope.screenWidth*(t-this.scope.currentPage),s.push(this.setPagePos(t,[r,0,0],{duration:300},function(){return function(){}}(this))));return s},t.prototype.menuScroll=function(){return this.scope.menuScrollT.get()},t.prototype.profileIconScroll=function(){return this.scope.profileIconScrollT.get()},t.prototype.jobIconScroll=function(){return this.scope.jobIconScrollT.get()},t.prototype.applyIconScroll=function(){return this.scope.applyIconScrollT.get()},t.prototype.profileIconScroll2=function(){return this.scope.profileIconScrollT2.get()},t.prototype.jobIconScroll2=function(){return this.scope.jobIconScrollT2.get()},t.prototype.applyIconScroll2=function(){return this.scope.applyIconScrollT2.get()},t.prototype.getButtonOpacity=function(e){return this.applicationMode===e,this.applicationModeOpacity[e].get()},t.prototype.switchTo=function(e){var t,r,n;this.goToPage(3),this.applicationMode=e,n=this.applicationModeOpacity;for(t in n)r=n[t],t===e?r.set(1,{duration:300},function(){return function(){}}(this)):r.set(.5,{duration:300},function(){return function(){}}(this));return this.scope.$broadcast("modeChange",e)},t.prototype.changePageTo=function(e){return this.scope.currentPage=e,this.timeout(function(t){return function(){switch(e){case 0:return t.state.go("login");case 1:return t.state.go("profile");case 2:return t.state.go("job");case 3:return t.state.go("detail")}}}(this))},t.prototype.goToPage=function(e,t){for(var r;this.scope.currentPage<e;)this.nextPage(t);for(r=[];this.scope.currentPage>e;)r.push(this.prevPage(t));return r},t.prototype.prevPage=function(e){var t,r,n,i;if(t=this.scope.currentPage,0>=t)return!1;for(r=0,i=t+r,n=this.pages[i].pos.get(),this.changePageTo(t-1),this.scope.$broadcast("pageChange",t,t-1,e),this.setPagePos(i,[(r+1)*this.scope.screenWidth,n[1],0],{duration:300},function(){return function(){}}(this)),r++,t--,r=0;t-r>=0;)i=t-r,n=this.pages[i].pos.get(),this.setPagePos(i,[0,n[1],-this.zSeparation*r],{duration:300},function(){return function(){}}(this)),r++;return!0},t.prototype.nextPage=function(e){var t,r,n,i;if(t=this.scope.currentPage,t>=this.numPages-1)return!1;for(r=0,i=t-r,n=this.pages[i].pos.get(),this.changePageTo(t+1),this.scope.$broadcast("pageChange",t,t+1,e),this.setPagePos(i,[0,n[1],-this.zSeparation*(r+1)],{duration:300},function(){return function(){}}(this)),r++,t++,r=0;t+r<this.numPages;)i=t+r,n=this.pages[i].pos.get(),this.setPagePos(i,[r*this.scope.screenWidth,n[1],0],{duration:300},function(){return function(){}}(this)),r++;return!0},t.prototype.getPagePosition=function(e){return this.pages[e].pos.get()},t.prototype.loadAngelUser=function(e){return this.scope.user?void("function"==typeof e&&e(null,this.scope.user)):this.scope.getUser(function(t){return function(){var r,n;return(r=t.localStorageService.get("accessToken"))?(n=t.http.get(""+t.baseUrl+"/myangel/me",{headers:{Authorization:"Bearer "+r}},{cache:!0}),n.success(function(r){return t.scope.user=r,"function"==typeof e?e(null,t.scope.user):void 0}),n.error(function(t){return"function"==typeof e?e(t):void 0})):void 0}}(this))},t}(r),angular.module("simplecareersApp").controller("AppCtrl",t)},{"./ctrl.coffee":3,async:17,"triangle-homography":19}],3:[function(e,t){"use strict";var r,n=function(e,t){return function(){return e.apply(t,arguments)}};r=function(){function e(e){var t,r,i,o;for(this.scope=e,this.pass=n(this.pass,this),o=_.functions(this),r=0,i=o.length;i>r;r++)t=o[r],"constructor"!==t&&(this.scope[t]=this[t]);this.Transitionable=this.famous["famous/transitions/Transitionable"],this.GenericSync=this.famous["famous/inputs/GenericSync"],this.MouseSync=this.famous["famous/inputs/MouseSync"],this.TouchSync=this.famous["famous/inputs/TouchSync"],this.RotateSync=this.famous["famous/inputs/RotateSync"],this.PinchSync=this.famous["famous/inputs/PinchSync"],this.Surface=this.famous["famous/core/Surface"],this.Engine=this.famous["famous/core/Engine"],this.Transform=this.famous["famous/core/Transform"],this.EventHandler=this.famous["famous/core/EventHandler"],this.Easing=this.famous["famous/transitions/Easing"],this.TweenTransition=this.famous["famous/transitions/TweenTransition"],this.TweenTransition.registerCurve("inSine",this.Easing.inSine),this.ContainerSurface=this.famous["famous/surfaces/ContainerSurface"],this.ScrollView=this.famous["famous/views/Scrollview"],this.GenericSync.register({mouse:this.MouseSync,touch:this.TouchSync,rotate:this.RotateSync,pinch:this.PinchSync}),this.baseUrl="https://simplecareers-test.apigee.net"}return e.prototype.pass=function(){return console.log("Not Yet Implemented")},e}(),t.exports=r},{}],4:[function(e){"use strict";var t,r,n=function(e,t){return function(){return e.apply(t,arguments)}},i={}.hasOwnProperty,o=function(e,t){function r(){this.constructor=e}for(var n in t)i.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};t=e("../ctrl.coffee"),r=function(e){function t(e,r,i,o,s,u,c,a){var f;this.scope=e,this.stateParams=r,this.state=i,this.Restangular=o,this.timeout=s,this.famous=u,this.http=c,this.storage=a,this.scrollYPosition=n(this.scrollYPosition,this),this.scrollNoPosition=n(this.scrollNoPosition,this),this.scrollYesPosition=n(this.scrollYesPosition,this),this.openQuestion=n(this.openQuestion,this),this.clickPass=n(this.clickPass,this),this.clickApply=n(this.clickApply,this),this.closeQuestion=n(this.closeQuestion,this),this.submitAnswer=n(this.submitAnswer,this),t.__super__.constructor.call(this,this.scope),this.scope.detailScrollPipe=new this.EventHandler,this.scope.options={detailScrollView:{paginated:!1,direction:1,speedLimit:5,margin:1e4},containerSurface:{size:[320,568],properties:{overflow:"hidden","z-index":650}}},this.questionTimeline=new this.Transitionable(0),this.scope.sliderPosX=new this.Transitionable(0),f=new this.GenericSync(["mouse","touch"]),this.scope.detailScrollPipe.pipe(f),this.max=this.scope.screenWidth/2-60,this.threshold=this.max-30,f.on("end",function(e){return function(){var t;t=e.scope.sliderPosX.get(),t>e.threshold?e.openQuestion():t<-e.threshold&&e.timeout(function(){return e.scope.hideDetail()}),e.scope.sliderPosX.set(0,{duration:300})}}(this)),f.on("update",function(e){return function(t){var r;return r=e.scope.sliderPosX.get(),e.scope.sliderPosX.set(Math.max(Math.min(e.max,r+t.delta[0]),-e.max))}}(this))}return o(t,e),t.$inject=["$scope","$stateParams","$state","Restangular","$timeout","$famous","$http","localStorageService"],t.prototype.submitAnswer=function(e,t){var r;return(r=this.storage.get("accessToken"))?(this.scope.status="loading",this.scope.loadAngelUser(function(n){return function(){var i;return i=n.http.post(""+n.baseUrl+"/myangel/talent/pairing",{startup_id:e.startup.id,user_interested:1,user_note:"  [Applied via Simple.Careers]\n\n  Applying for "+e.title+"\n\n  Question: What excites you about this job? Why'd you be a good fit?\n\n  Answer: "+t},{headers:{Authorization:"Bearer "+r}}),i.success(function(){return n.closeQuestion(),n.scope.saveApplies(e)}),i.error(function(){return alert("There is an error.")})}}(this))):void 0},t.prototype.closeQuestion=function(){return this.scope.isTextAreaFocused=!1,this.questionTimeline.set(0,{duration:300})},t.prototype.clickApply=function(){return this.scope.sliderPosX.set(this.threshold,{duration:300},function(e){return function(){return e.openQuestion(),e.scope.sliderPosX.set(0,{duration:300})}}(this))},t.prototype.clickPass=function(){return this.scope.sliderPosX.set(-this.threshold,{duration:300},function(e){return function(){return e.timeout(function(){return e.scope.hideDetail()}),e.scope.sliderPosX.set(0,{duration:300})}}(this))},t.prototype.openQuestion=function(){return this.timeout(function(e){return function(){return e.scope.isTextAreaFocused=!0}}(this)),this.questionTimeline.set(1,{duration:300})},t.prototype.scrollYesPosition=function(){var e;return e=this.scope.sliderPosX.get(),e/this.max*.5+.5},t.prototype.scrollNoPosition=function(){var e;return e=this.scope.sliderPosX.get(),e/this.max*.5+.5},t.prototype.scrollYPosition=function(){return this.questionTimeline.get()},t}(t),angular.module("simplecareersApp").controller("DetailCardCtrl",r)},{"../ctrl.coffee":3}],5:[function(e){"use strict";var t,r,n,i=function(e,t){return function(){return e.apply(t,arguments)}},o={}.hasOwnProperty,s=function(e,t){function r(){this.constructor=e}for(var n in t)o.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},u=[].indexOf||function(e){for(var t=0,r=this.length;r>t;t++)if(t in this&&this[t]===e)return t;return-1};t=e("../ctrl.coffee"),n=e("async"),r=function(e){function t(e,r,n,o,s,u,c,a,f){return this.scope=e,this.stateParams=r,this.state=n,this.Restangular=o,this.timeout=s,this.famous=u,this.storage=c,this.http=a,this.localStorageService=f,this.pageChange=i(this.pageChange,this),this.hideDetail=i(this.hideDetail,this),this.showDetail=i(this.showDetail,this),this.loadLikes=i(this.loadLikes,this),this.loadApplies=i(this.loadApplies,this),this.addApprove=i(this.addApprove,this),t.__super__.constructor.call(this,this.scope),this.scope.$emit("showMenu"),this.scope.$emit("page",3),this.scope.isLogin()?(this.scope.listPipe=new this.EventHandler,this.scope.mode="Like",this.scope.likes=[],this.scope.approves=[],this.scope.applies=[],this.scope.$on("modeChange",function(e){return function(t,r){return e.scope.mode=r}}(this)),void this.scope.getUser(function(e){return function(t,r){var n,i;return e.loadLikes(r.likes.reverse()),n=e.localStorageService.get("accessToken"),i=e.http.get(""+e.baseUrl+"/myangel/talent/startups",{headers:{Authorization:"Bearer "+n}},{cache:!0}),i.success(function(t){return e.scope.approvesBuffer=t.matched,e.loadApplies(r.applies.reverse())}),i.error(function(){return e.loadApplies(r.applies.reverse())})}}(this))):void this.scope.changePageTo(0)}return s(t,e),t.$inject=["$scope","$stateParams","$state","Restangular","$timeout","$famous","localStorageService","$http","localStorageService"],t.prototype.addApprove=function(e){var t;return t=e.startup.id,u.call(this.scope.approvesBuffer,t)>=0?this.scope.approves.push(e):void 0},t.prototype.loadApplies=function(e){return this.scope.appliesBuffer=e,n.map(this.scope.appliesBuffer,function(e){return function(t,r){return e.scope.loadCard(t,function(t,n){return t||!n?void r():(e.addApprove(n),r(null,n))})}}(this),function(e){return function(t,r){return r.forEach(function(t){return t?e.scope.applies.push(t):void 0})}}(this))},t.prototype.loadLikes=function(e){return this.scope.likesBuffer=e,n.map(this.scope.likesBuffer,function(e){return function(t,r){return e.scope.loadCard(t,function(e,t){return e||!t?void r():r(null,t)})}}(this),function(e){return function(t,r){return r.forEach(function(t){return t?e.scope.likes.push(t):void 0})}}(this))},t.prototype.showDetail=function(e){return this.scope.card=e},t.prototype.hideDetail=function(){return this.scope.card=void 0},t.prototype.pageChange=function(){},t}(t),angular.module("simplecareersApp").controller("DetailCtrl",r)},{"../ctrl.coffee":3,async:17}],6:[function(e){"use strict";var t,r,n={}.hasOwnProperty,i=function(e,t){function r(){this.constructor=e}for(var i in t)n.call(t,i)&&(e[i]=t[i]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};t=e("../ctrl.coffee"),r=function(e){function t(e,r,n,i,o,s){this.scope=e,this.stateParams=r,this.state=n,this.Restangular=i,this.timeout=o,this.famous=s,t.__super__.constructor.call(this,this.scope),this.scope.options={containerSurface:{size:[void 0,void 0],properties:{overflow:"hidden","z-index":750,opacity:.1}}},this.scope.questionScrollPipe=new this.EventHandler}return i(t,e),t.$inject=["$scope","$stateParams","$state","Restangular","$timeout","$famous"],t}(t),angular.module("simplecareersApp").controller("QuestionCtrl",r)},{"../ctrl.coffee":3}],7:[function(e){"use strict";var t,r,n,i,o=function(e,t){return function(){return e.apply(t,arguments)}},s={}.hasOwnProperty,u=function(e,t){function r(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};t=e("../ctrl.coffee"),i=e("async"),n=e("../../extensions/Queue.js"),r=function(e){function t(e,r,i,s,u,c,a){var f;this.scope=e,this.stateParams=r,this.state=i,this.timeout=s,this.famous=u,this.http=c,this.preloader=a,this.getScale=o(this.getScale,this),this.openTutorial=o(this.openTutorial,this),this.closeTutorial=o(this.closeTutorial,this),this.scrollYPosition=o(this.scrollYPosition,this),this.scrollXPosition=o(this.scrollXPosition,this),this.loadBackground=o(this.loadBackground,this),this.loadPage=o(this.loadPage,this),this.loadMore=o(this.loadMore,this),this.process=o(this.process,this),this.filter=o(this.filter,this),t.__super__.constructor.call(this,this.scope),this.scope.$emit("showMenu"),this.scope.$emit("page",2),this.scope.showTutorial=!1,this.scope.tutorialPipe=new this.EventHandler,f=new this.GenericSync(["mouse","touch"]),this.scope.tutorialPipe.pipe(f),this.scope.options={containerSurface:{size:[320,568],properties:{overflow:"hidden","z-index":201,"background-color":"black"}}},this.index=0,this.page=0,this.done=!1,this.loading=!1,this.dataBuffer=new n,this.scope.cards=[],this.scope.threshold=100,this.scope.cardSpacing=10,this.scope.curIdx=0,this.odd=!0,this.loadMore(),this.loadBackground(),this.scope.$on("scroll",function(e){return function(t,r){return e.backgroundTimeline.set(e.odd?r:1-r)}}(this)),this.scope.$on("next",function(e){return function(){return e.odd=!e.odd,e.scope.curIdx++,e.scope.cards.shift(),e.loadMore(),e.loadBackground()}}(this)),this.scope.scrollPipe=this.EventHandler(),this.tutorialTimeline=new this.Transitionable(0),this.backgroundTimeline=new this.Transitionable(0)}return u(t,e),t.$inject=["$scope","$stateParams","$state","$timeout","$famous","$http","preloader"],t.prototype.filter=function(e,t){var r,n;return e&&e.description&&e.startup&&e.startup.product_desc&&(null!=(r=e.startup.screenshots)&&null!=(n=r[0])?n.thumb:void 0)?"function"==typeof t?t(e):void 0:"function"==typeof t?t(null):void 0},t.prototype.process=function(e){var t;if(!(0>=e))return(t=this.dataBuffer.dequeue())?(t.index=this.index++,this.index%10===5&&angular.element(".jobcard0").slice(0,-1).remove(),this.preloader.preloadImages([t.screenshot,t.startup.logo_url]).then(function(){return function(){}}(this)),this.scope.cards.push(t),this.loadBackground(),this.process(e-1)):void this.process(e-1)},t.prototype.loadMore=function(){var e;e=this.dataBuffer.getLength(),e>0&&this.process(4-this.scope.cards.length),this.done||!this.loading&&10>e&&this.loadPage(function(e){return function(){return e.process(4-e.scope.cards.length)}}(this))},t.prototype.loadPage=function(e){var t,r;return this.loading?void("function"==typeof e&&e()):(this.loading=!0,r=this.http.get(""+this.baseUrl+"/angel/jobs?page="+this.page++,{},{cache:!0}),e&&(t=_.throttle(e)),r.error(function(e){return function(){return e.loading=!1,"function"==typeof t?t():void 0}}(this)),r.success(function(e){return function(r){return e.loading=!1,r.page===r.last_page&&(e.done=!0),r&&r.jobs?i.eachLimit(r.jobs,4,function(r,n){return e.scope.processCard(r,function(r){return e.filter(r,function(r){return r&&(e.dataBuffer.enqueue(r),"function"==typeof t&&t()),n()})})},function(){return"function"==typeof t?t():void 0},function(){return"function"==typeof t?t():void 0}):void("function"==typeof t&&t())}}(this)))},t.prototype.loadBackground=function(){return this.scope.cards[0]&&this.scope.cards[1]?this.odd?(this.scope.currentImage=this.scope.cards[0].screenshot,this.scope.nextImage=this.scope.cards[1].screenshot):(this.scope.nextImage=this.scope.cards[0].screenshot,this.scope.currentImage=this.scope.cards[1].screenshot):void 0},t.prototype.scrollXPosition=function(){return this.backgroundTimeline.get()},t.prototype.scrollYPosition=function(){return this.tutorialTimeline.get()},t.prototype.closeTutorial=function(){return this.tutorialTimeline.set(0,{duration:400},function(e){return function(){return e.timeout(function(){return e.scope.showTutorial=!1})}}(this))},t.prototype.openTutorial=function(){return this.scope.showTutorial=!0,this.tutorialTimeline.set(1,{duration:400})},t.prototype.getScale=function(){var e,t,r;return e=594.25,t=335,r=Math.min(this.scope.screenHeight/e,this.scope.screenWidth/t),[r,r]},t}(t),angular.module("simplecareersApp").controller("JobCtrl",r)},{"../../extensions/Queue.js":12,"../ctrl.coffee":3,async:17}],8:[function(e){"use strict";var t,r,n,i=function(e,t){return function(){return e.apply(t,arguments)}},o={}.hasOwnProperty,s=function(e,t){function r(){this.constructor=e}for(var n in t)o.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};t=e("../ctrl.coffee"),n=e("../../extensions/utils.coffee"),r=function(e){function t(e,r,n,o,s,u,c,a){this.scope=e,this.stateParams=r,this.state=n,this.timeout=o,this.famous=s,this.http=u,this.localStorageService=c,this.Restangular=a,this.getPosition=i(this.getPosition,this),this.scrollXPosition=i(this.scrollXPosition,this),this.scrollPositionPass=i(this.scrollPositionPass,this),this.scrollPositionFav=i(this.scrollPositionFav,this),this.getRotation=i(this.getRotation,this),this.commitFav=i(this.commitFav,this),this.animateFav=i(this.animateFav,this),this.commitPass=i(this.commitPass,this),this.animatePass=i(this.animatePass,this),this.animateNoChange=i(this.animateNoChange,this),this.reset=i(this.reset,this),this.syncEnd=i(this.syncEnd,this),this.syncStart=i(this.syncStart,this),this.syncUpdate=i(this.syncUpdate,this),t.__super__.constructor.call(this,this.scope),this.scope.card.pos=this.pos=new this.Transitionable([0,0,0]),this.rot=new this.Transitionable([0,0,0]),this.sync=new this.GenericSync(["mouse","touch"]),this.sync.on("start",this.syncStart),this.sync.on("end",this.syncEnd),this.sync.on("update",this.syncUpdate),this.scope.swipePipe=new this.EventHandler,this.scope.swipePipe.pipe(this.sync)}return s(t,e),t.$inject=["$scope","$stateParams","$state","$timeout","$famous","$http","localStorageService","Restangular"],t.prototype.syncUpdate=function(e){var t,r;return this.startDrag?(this.dragging=!0,t=e.clientX-this.startX,r=e.clientY-this.startY,this.pos.set([t,r,0]),this.rot.set([0,0,t/this.scope.threshold*3.14/16])):void 0},t.prototype.syncStart=function(e){return this.dragging?void 0:(this.startDrag=!0,this.startX=e.clientX,this.startY=e.clientY)},t.prototype.syncEnd=function(){var e,t;return this.scope.curIdx!==this.scope.card.index?(this.reset(),this.pos.set([0,0,0]),void this.rot.set([0,0,0])):(this.reset(),t=this.pos.get(),e=this.scope.threshold/2,t[0]<-e?this.animatePass():t[0]>e?this.animateFav():this.animateNoChange())},t.prototype.reset=function(){return this.dragging=!1,this.startDrag=!1},t.prototype.animateNoChange=function(){return this.pos.set([0,0,0],{duration:300,curve:"easeInOut"},function(e){return function(){return e.reset()}}(this))},t.prototype.animatePass=function(){return this.pos.set([-this.scope.screenWidth,2*this.scope.screenHeight,0],{duration:300,curve:"easeInOut"},function(e){return function(){return e.reset(),e.commitPass()}}(this))},t.prototype.commitPass=function(){return this.timeout(function(e){return function(){return e.scope.$emit("next")}}(this))},t.prototype.animateFav=function(){return this.pos.set([this.scope.screenWidth,2*this.scope.screenHeight,0],{duration:300,curve:"easeInOut"},function(e){return function(){return e.reset(),e.commitFav()}}(this))},t.prototype.commitFav=function(){return this.timeout(function(e){return function(){return e.scope.$emit("next"),e.scope.saveLike(e.scope.card)}}(this))},t.prototype.getRotation=function(e,t){return e!==t?[0,0,0]:this.rot.get()},t.prototype.scrollPositionFav=function(){var e,t;return e=this.pos.get(),t=n.clamp(e[0]/this.scope.threshold,0,1)},t.prototype.scrollPositionPass=function(){var e,t;return e=this.pos.get(),t=n.clamp(e[0]/this.scope.threshold,-1,0),-t},t.prototype.scrollXPosition=function(){var e,t;return e=this.scope.cards[0].pos.get(),t=n.clamp(1-Math.abs(e[0]/this.scope.threshold),0,1),this.scope.$emit("scroll",t),t},t.prototype.getPosition=function(e,t){var r,n;switch(r=e-t){case 0:return this.pos.get();case 1:case 2:return n=this.scope.cardSpacing*(r-1)+this.scope.cardSpacing*this.scrollXPosition(),[0,n,-n];default:return n=2*this.scope.cardSpacing,[0,n,-n]}},t}(t),angular.module("simplecareersApp").controller("JobCardCtrl",r)},{"../../extensions/utils.coffee":14,"../ctrl.coffee":3}],9:[function(e){"use strict";var t,r,n={}.hasOwnProperty,i=function(e,t){function r(){this.constructor=e}for(var i in t)n.call(t,i)&&(e[i]=t[i]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e
};t=e("../ctrl.coffee"),r=function(e){function t(e,r,n,i,o,s){var u;this.scope=e,this.stateParams=r,this.state=n,this.timeout=i,this.famous=o,this.http=s,t.__super__.constructor.call(this,this.scope),this.scope.tutorialPipe=new this.EventHandler,u=new this.GenericSync(["mouse","touch"]),this.scope.tutorialPipe.pipe(u)}return i(t,e),t.$inject=["$scope","$stateParams","$state","$timeout","$famous","$http"],t}(t),angular.module("simplecareersApp").controller("TutorialCtrl",r)},{"../ctrl.coffee":3}],10:[function(e){"use strict";var t,r,n=function(e,t){return function(){return e.apply(t,arguments)}},i={}.hasOwnProperty,o=function(e,t){function r(){this.constructor=e}for(var n in t)i.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};t=e("../ctrl.coffee"),r=function(e){function t(e,r,i,o,s,u,c,a){var f;this.scope=e,this.stateParams=r,this.state=i,this.Restangular=o,this.timeout=s,this.famous=u,this.localStorageService=c,this.http=a,this.clickTerm=n(this.clickTerm,this),this.login=n(this.login,this),this.uuid=n(this.uuid,this),this.checkToken=n(this.checkToken,this),this.receiveMessage=n(this.receiveMessage,this),t.__super__.constructor.call(this,this.scope),this.scope.$emit("hideMenu"),this.scope.$emit("page",0),this.scope.loginPipe=new this.EventHandler,f=new this.GenericSync(["mouse","touch"]),this.scope.loginPipe.pipe(f),this.scope.options={containerSurface:{size:[320,568],properties:{overflow:"hidden","z-index":50}}},this.scope.status="normal",this.scope.isLogin()&&(this.scope.getUser(),this.scope.goToPage(1))}return o(t,e),t.$inject=["$scope","$stateParams","$state","Restangular","$timeout","$famous","localStorageService","$http"],t.prototype.receiveMessage=function(e){var t,r,n;return this.scope.status="normal",t=JSON.parse(e.data),t.error?void(null!=(r=this.popup)&&r.close()):(this.localStorageService.set("accessToken",t.accessToken),this.localStorageService.set("userId",t.userId),this.localStorageService.set("sessionToken",t.sessionToken),this.scope.getUser(),this.timeout.cancel(this.checkpromise),null!=(n=this.popup)&&n.close(),window.removeEventListener("message",this.receiveMessage),this.scope.goToPage(1))},t.prototype.checkToken=function(){var e;return e=this.http.get("http://simplecareers.parseapp.com/check?itoken="+this.itoken),e.success(function(e){return function(t){return t&&t.access&&t.session&&t.user?(e.timeout.cancel(e.checkpromise),e.localStorageService.set("accessToken",t.access),e.localStorageService.set("userId",t.user),e.localStorageService.set("sessionToken",t.session),e.scope.getUser(),e.scope.goToPage(1)):void(e.checkpromise=e.timeout(e.checkToken,1e3))}}(this)),e.error(function(e){return function(){return e.checkpromise=e.timeout(e.checkToken,1e3)}}(this))},t.prototype.uuid=function(){var e;return e=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)},e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},t.prototype.login=function(){console.log("login"),this.scope.status="logging",this.itoken=this.uuid(),this.popup=window.open("http://simplecareers.parseapp.com/authorize?itoken="+this.itoken),this.checkpromise=this.timeout(this.checkToken,1e3)},t.prototype.clickTerm=function(){window.open("http://www.simple.careers/terms")},t}(t),angular.module("simplecareersApp").controller("LoginCtrl",r)},{"../ctrl.coffee":3}],11:[function(e){"use strict";var t,r,n={}.hasOwnProperty,i=function(e,t){function r(){this.constructor=e}for(var i in t)n.call(t,i)&&(e[i]=t[i]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};t=e("../ctrl.coffee"),r=function(e){function t(e,r,n,i,o,s,u,c){return this.scope=e,this.stateParams=r,this.state=n,this.Restangular=i,this.timeout=o,this.famous=s,this.http=u,this.localStorageService=c,t.__super__.constructor.call(this,this.scope),this.scope.$emit("showMenu"),this.scope.$emit("page",1),this.scope.isLogin()?(this.scope.profilePipe=new this.EventHandler,this.scope.options={profileScrollView:{paginated:!1,direction:1,speedLimit:10,margin:1e4},containerSurface:{size:[void 0,void 0],properties:{overflow:"hidden","z-index":150}}},this.scope.status="loading",void this.scope.loadAngelUser(function(e){return function(t,r){return e.scope.status="loaded",r?e.scope.user=r:void(e.scope.status="notavailable")}}(this))):void this.scope.changePageTo(0)}return i(t,e),t.$inject=["$scope","$stateParams","$state","Restangular","$timeout","$famous","$http","localStorageService"],t}(t),angular.module("simplecareersApp").controller("ProfileCtrl",r)},{"../ctrl.coffee":3}],12:[function(e,t){function r(){var e=[],t=0;this.getLength=function(){return e.length-t},this.isEmpty=function(){return 0==e.length},this.enqueue=function(t){e.push(t)},this.dequeue=function(){if(0==e.length)return void 0;var r=e[t];return 2*++t>=e.length&&(e=e.slice(t),t=0),r},this.peek=function(){return e.length>0?e[t]:void 0}}t.exports=r},{}],13:[function(){String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)}},{}],14:[function(e,t){"use strict";var r;r=function(){function e(){}return e.clamp=function(e,t,r){return Math.min(Math.max(t,e),r)},e}(),t.exports=r},{}],15:[function(){angular.module("preloader",[]).factory("preloader",["$q","$rootScope",function(e,t){var r,n,i,o,s,u,c,a;return r=function(t){this.imageLocations=t,this.imageCount=this.imageLocations.length,this.loadCount=0,this.errorCount=0,this.states={PENDING:1,LOADING:2,RESOLVED:3,REJECTED:4},this.state=this.states.PENDING,this.deferred=e.defer(),this.promise=this.deferred.promise},r.preloadImages=function(e){var t;return t=new r(e),t.load()},r.prototype={constructor:r,isInitiated:o=function(){return this.state!==this.states.PENDING},isRejected:s=function(){return this.state===this.states.REJECTED},isResolved:u=function(){return this.state===this.states.RESOLVED},load:c=function(){var e;if(this.isInitiated())return this.promise;for(this.state=this.states.LOADING,e=0;e<this.imageCount;)this.loadImageLocation(this.imageLocations[e]),e++;return this.promise},handleImageError:n=function(e){this.errorCount++,this.isRejected()||(this.state=this.states.REJECTED,this.deferred.reject(e))},handleImageLoad:i=function(e){this.loadCount++,this.isRejected()||(this.deferred.notify({percent:Math.ceil(this.loadCount/this.imageCount*100),imageLocation:e}),this.loadCount===this.imageCount&&(this.state=this.states.RESOLVED,this.deferred.resolve(this.imageLocations)))},loadImageLocation:a=function(e){var r,n;n=this,r=$(new Image).load(function(e){t.$apply(function(){n.handleImageLoad(e.target.src),n=r=e=null})}).error(function(e){t.$apply(function(){n.handleImageError(e.target.src),n=r=e=null})}).prop("src",e)}},r}])},{}],16:[function(){angular.module("syncFocusWith",[]).directive("syncFocusWith",function(){return{restrict:"A",scope:{focusValue:"=syncFocusWith"},link:function(e,t){e.$watch("focusValue",function(e,r){e!==!0||r?e===!1&&r&&t[0].blur():t[0].focus()})}}})},{}],17:[function(e,t){(function(e){!function(){function r(e){var t=!1;return function(){if(t)throw new Error("Callback was already called.");t=!0,e.apply(n,arguments)}}var n,i,o={};n=this,null!=n&&(i=n.async),o.noConflict=function(){return n.async=i,o};var s=Object.prototype.toString,u=Array.isArray||function(e){return"[object Array]"===s.call(e)},c=function(e,t){if(e.forEach)return e.forEach(t);for(var r=0;r<e.length;r+=1)t(e[r],r,e)},a=function(e,t){if(e.map)return e.map(t);var r=[];return c(e,function(e,n,i){r.push(t(e,n,i))}),r},f=function(e,t,r){return e.reduce?e.reduce(t,r):(c(e,function(e,n,i){r=t(r,e,n,i)}),r)},h=function(e){if(Object.keys)return Object.keys(e);var t=[];for(var r in e)e.hasOwnProperty(r)&&t.push(r);return t};"undefined"!=typeof e&&e.nextTick?(o.nextTick=e.nextTick,o.setImmediate="undefined"!=typeof setImmediate?function(e){setImmediate(e)}:o.nextTick):"function"==typeof setImmediate?(o.nextTick=function(e){setImmediate(e)},o.setImmediate=o.nextTick):(o.nextTick=function(e){setTimeout(e,0)},o.setImmediate=o.nextTick),o.each=function(e,t,n){function i(t){t?(n(t),n=function(){}):(o+=1,o>=e.length&&n())}if(n=n||function(){},!e.length)return n();var o=0;c(e,function(e){t(e,r(i))})},o.forEach=o.each,o.eachSeries=function(e,t,r){if(r=r||function(){},!e.length)return r();var n=0,i=function(){t(e[n],function(t){t?(r(t),r=function(){}):(n+=1,n>=e.length?r():i())})};i()},o.forEachSeries=o.eachSeries,o.eachLimit=function(e,t,r,n){var i=p(t);i.apply(null,[e,r,n])},o.forEachLimit=o.eachLimit;var p=function(e){return function(t,r,n){if(n=n||function(){},!t.length||0>=e)return n();var i=0,o=0,s=0;!function u(){if(i>=t.length)return n();for(;e>s&&o<t.length;)o+=1,s+=1,r(t[o-1],function(e){e?(n(e),n=function(){}):(i+=1,s-=1,i>=t.length?n():u())})}()}},l=function(e){return function(){var t=Array.prototype.slice.call(arguments);return e.apply(null,[o.each].concat(t))}},m=function(e,t){return function(){var r=Array.prototype.slice.call(arguments);return t.apply(null,[p(e)].concat(r))}},d=function(e){return function(){var t=Array.prototype.slice.call(arguments);return e.apply(null,[o.eachSeries].concat(t))}},g=function(e,t,r,n){if(t=a(t,function(e,t){return{index:t,value:e}}),n){var i=[];e(t,function(e,t){r(e.value,function(r,n){i[e.index]=n,t(r)})},function(e){n(e,i)})}else e(t,function(e,t){r(e.value,function(e){t(e)})})};o.map=l(g),o.mapSeries=d(g),o.mapLimit=function(e,t,r,n){return y(t)(e,r,n)};var y=function(e){return m(e,g)};o.reduce=function(e,t,r,n){o.eachSeries(e,function(e,n){r(t,e,function(e,r){t=r,n(e)})},function(e){n(e,t)})},o.inject=o.reduce,o.foldl=o.reduce,o.reduceRight=function(e,t,r,n){var i=a(e,function(e){return e}).reverse();o.reduce(i,t,r,n)},o.foldr=o.reduceRight;var v=function(e,t,r,n){var i=[];t=a(t,function(e,t){return{index:t,value:e}}),e(t,function(e,t){r(e.value,function(r){r&&i.push(e),t()})},function(){n(a(i.sort(function(e,t){return e.index-t.index}),function(e){return e.value}))})};o.filter=l(v),o.filterSeries=d(v),o.select=o.filter,o.selectSeries=o.filterSeries;var x=function(e,t,r,n){var i=[];t=a(t,function(e,t){return{index:t,value:e}}),e(t,function(e,t){r(e.value,function(r){r||i.push(e),t()})},function(){n(a(i.sort(function(e,t){return e.index-t.index}),function(e){return e.value}))})};o.reject=l(x),o.rejectSeries=d(x);var w=function(e,t,r,n){e(t,function(e,t){r(e,function(r){r?(n(e),n=function(){}):t()})},function(){n()})};o.detect=l(w),o.detectSeries=d(w),o.some=function(e,t,r){o.each(e,function(e,n){t(e,function(e){e&&(r(!0),r=function(){}),n()})},function(){r(!1)})},o.any=o.some,o.every=function(e,t,r){o.each(e,function(e,n){t(e,function(e){e||(r(!1),r=function(){}),n()})},function(){r(!0)})},o.all=o.every,o.sortBy=function(e,t,r){o.map(e,function(e,r){t(e,function(t,n){t?r(t):r(null,{value:e,criteria:n})})},function(e,t){if(e)return r(e);var n=function(e,t){var r=e.criteria,n=t.criteria;return n>r?-1:r>n?1:0};r(null,a(t.sort(n),function(e){return e.value}))})},o.auto=function(e,t){t=t||function(){};var r=h(e),n=r.length;if(!n)return t();var i={},s=[],a=function(e){s.unshift(e)},p=function(e){for(var t=0;t<s.length;t+=1)if(s[t]===e)return void s.splice(t,1)},l=function(){n--,c(s.slice(0),function(e){e()})};a(function(){if(!n){var e=t;t=function(){},e(null,i)}}),c(r,function(r){var n=u(e[r])?e[r]:[e[r]],s=function(e){var n=Array.prototype.slice.call(arguments,1);if(n.length<=1&&(n=n[0]),e){var s={};c(h(i),function(e){s[e]=i[e]}),s[r]=n,t(e,s),t=function(){}}else i[r]=n,o.setImmediate(l)},m=n.slice(0,Math.abs(n.length-1))||[],d=function(){return f(m,function(e,t){return e&&i.hasOwnProperty(t)},!0)&&!i.hasOwnProperty(r)};if(d())n[n.length-1](s,i);else{var g=function(){d()&&(p(g),n[n.length-1](s,i))};a(g)}})},o.retry=function(e,t,r){var n=5,i=[];"function"==typeof e&&(r=t,t=e,e=n),e=parseInt(e,10)||n;var s=function(n,s){for(var u=function(e,t){return function(r){e(function(e,n){r(!e||t,{err:e,result:n})},s)}};e;)i.push(u(t,!(e-=1)));o.series(i,function(e,t){t=t[t.length-1],(n||r)(t.err,t.result)})};return r?s():s},o.waterfall=function(e,t){if(t=t||function(){},!u(e)){var r=new Error("First argument to waterfall must be an array of functions");return t(r)}if(!e.length)return t();var n=function(e){return function(r){if(r)t.apply(null,arguments),t=function(){};else{var i=Array.prototype.slice.call(arguments,1),s=e.next();i.push(s?n(s):t),o.setImmediate(function(){e.apply(null,i)})}}};n(o.iterator(e))()};var b=function(e,t,r){if(r=r||function(){},u(t))e.map(t,function(e,t){e&&e(function(e){var r=Array.prototype.slice.call(arguments,1);r.length<=1&&(r=r[0]),t.call(null,e,r)})},r);else{var n={};e.each(h(t),function(e,r){t[e](function(t){var i=Array.prototype.slice.call(arguments,1);i.length<=1&&(i=i[0]),n[e]=i,r(t)})},function(e){r(e,n)})}};o.parallel=function(e,t){b({map:o.map,each:o.each},e,t)},o.parallelLimit=function(e,t,r){b({map:y(t),each:p(t)},e,r)},o.series=function(e,t){if(t=t||function(){},u(e))o.mapSeries(e,function(e,t){e&&e(function(e){var r=Array.prototype.slice.call(arguments,1);r.length<=1&&(r=r[0]),t.call(null,e,r)})},t);else{var r={};o.eachSeries(h(e),function(t,n){e[t](function(e){var i=Array.prototype.slice.call(arguments,1);i.length<=1&&(i=i[0]),r[t]=i,n(e)})},function(e){t(e,r)})}},o.iterator=function(e){var t=function(r){var n=function(){return e.length&&e[r].apply(null,arguments),n.next()};return n.next=function(){return r<e.length-1?t(r+1):null},n};return t(0)},o.apply=function(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t.concat(Array.prototype.slice.call(arguments)))}};var S=function(e,t,r,n){var i=[];e(t,function(e,t){r(e,function(e,r){i=i.concat(r||[]),t(e)})},function(e){n(e,i)})};o.concat=l(S),o.concatSeries=d(S),o.whilst=function(e,t,r){e()?t(function(n){return n?r(n):void o.whilst(e,t,r)}):r()},o.doWhilst=function(e,t,r){e(function(n){if(n)return r(n);var i=Array.prototype.slice.call(arguments,1);t.apply(null,i)?o.doWhilst(e,t,r):r()})},o.until=function(e,t,r){e()?r():t(function(n){return n?r(n):void o.until(e,t,r)})},o.doUntil=function(e,t,r){e(function(n){if(n)return r(n);var i=Array.prototype.slice.call(arguments,1);t.apply(null,i)?r():o.doUntil(e,t,r)})},o.queue=function(e,t){function n(e,t,r,n){return e.started||(e.started=!0),u(t)||(t=[t]),0==t.length?o.setImmediate(function(){e.drain&&e.drain()}):void c(t,function(t){var i={data:t,callback:"function"==typeof n?n:null};r?e.tasks.unshift(i):e.tasks.push(i),e.saturated&&e.tasks.length===e.concurrency&&e.saturated(),o.setImmediate(e.process)})}void 0===t&&(t=1);var i=0,s={tasks:[],concurrency:t,saturated:null,empty:null,drain:null,started:!1,paused:!1,push:function(e,t){n(s,e,!1,t)},kill:function(){s.drain=null,s.tasks=[]},unshift:function(e,t){n(s,e,!0,t)},process:function(){if(!s.paused&&i<s.concurrency&&s.tasks.length){var t=s.tasks.shift();s.empty&&0===s.tasks.length&&s.empty(),i+=1;var n=function(){i-=1,t.callback&&t.callback.apply(t,arguments),s.drain&&s.tasks.length+i===0&&s.drain(),s.process()},o=r(n);e(t.data,o)}},length:function(){return s.tasks.length},running:function(){return i},idle:function(){return s.tasks.length+i===0},pause:function(){s.paused!==!0&&(s.paused=!0,s.process())},resume:function(){s.paused!==!1&&(s.paused=!1,s.process())}};return s},o.priorityQueue=function(e,t){function r(e,t){return e.priority-t.priority}function n(e,t,r){for(var n=-1,i=e.length-1;i>n;){var o=n+(i-n+1>>>1);r(t,e[o])>=0?n=o:i=o-1}return n}function i(e,t,i,s){return e.started||(e.started=!0),u(t)||(t=[t]),0==t.length?o.setImmediate(function(){e.drain&&e.drain()}):void c(t,function(t){var u={data:t,priority:i,callback:"function"==typeof s?s:null};e.tasks.splice(n(e.tasks,u,r)+1,0,u),e.saturated&&e.tasks.length===e.concurrency&&e.saturated(),o.setImmediate(e.process)})}var s=o.queue(e,t);return s.push=function(e,t,r){i(s,e,t,r)},delete s.unshift,s},o.cargo=function(e,t){var r=!1,n=[],i={tasks:n,payload:t,saturated:null,empty:null,drain:null,drained:!0,push:function(e,r){u(e)||(e=[e]),c(e,function(e){n.push({data:e,callback:"function"==typeof r?r:null}),i.drained=!1,i.saturated&&n.length===t&&i.saturated()}),o.setImmediate(i.process)},process:function s(){if(!r){if(0===n.length)return i.drain&&!i.drained&&i.drain(),void(i.drained=!0);var o="number"==typeof t?n.splice(0,t):n.splice(0,n.length),u=a(o,function(e){return e.data});i.empty&&i.empty(),r=!0,e(u,function(){r=!1;var e=arguments;c(o,function(t){t.callback&&t.callback.apply(null,e)}),s()})}},length:function(){return n.length},running:function(){return r}};return i};var P=function(e){return function(t){var r=Array.prototype.slice.call(arguments,1);t.apply(null,r.concat([function(t){var r=Array.prototype.slice.call(arguments,1);"undefined"!=typeof console&&(t?console.error&&console.error(t):console[e]&&c(r,function(t){console[e](t)}))}]))}};o.log=P("log"),o.dir=P("dir"),o.memoize=function(e,t){var r={},n={};t=t||function(e){return e};var i=function(){var i=Array.prototype.slice.call(arguments),s=i.pop(),u=t.apply(null,i);u in r?o.nextTick(function(){s.apply(null,r[u])}):u in n?n[u].push(s):(n[u]=[s],e.apply(null,i.concat([function(){r[u]=arguments;var e=n[u];delete n[u];for(var t=0,i=e.length;i>t;t++)e[t].apply(null,arguments)}])))};return i.memo=r,i.unmemoized=e,i},o.unmemoize=function(e){return function(){return(e.unmemoized||e).apply(null,arguments)}},o.times=function(e,t,r){for(var n=[],i=0;e>i;i++)n.push(i);return o.map(n,t,r)},o.timesSeries=function(e,t,r){for(var n=[],i=0;e>i;i++)n.push(i);return o.mapSeries(n,t,r)},o.seq=function(){var e=arguments;return function(){var t=this,r=Array.prototype.slice.call(arguments),n=r.pop();o.reduce(e,r,function(e,r,n){r.apply(t,e.concat([function(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);n(e,t)}]))},function(e,r){n.apply(t,[e].concat(r))})}},o.compose=function(){return o.seq.apply(null,Array.prototype.reverse.call(arguments))};var k=function(e,t){var r=function(){var r=this,n=Array.prototype.slice.call(arguments),i=n.pop();return e(t,function(e,t){e.apply(r,n.concat([t]))},i)};if(arguments.length>2){var n=Array.prototype.slice.call(arguments,2);return r.apply(this,n)}return r};o.applyEach=l(k),o.applyEachSeries=d(k),o.forever=function(e,t){function r(n){if(n){if(t)return t(n);throw n}e(r)}r()},"undefined"!=typeof t&&t.exports?t.exports=o:"undefined"!=typeof define&&define.amd?define([],function(){return o}):n.async=o}()}).call(this,e("oMfpAn"))},{oMfpAn:18}],18:[function(e,t){function r(){}var n=t.exports={};n.nextTick=function(){var e="undefined"!=typeof window&&window.setImmediate,t="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(e)return function(e){return window.setImmediate(e)};if(t){var r=[];return window.addEventListener("message",function(e){var t=e.source;if((t===window||null===t)&&"process-tick"===e.data&&(e.stopPropagation(),r.length>0)){var n=r.shift();n()}},!0),function(e){r.push(e),window.postMessage("process-tick","*")}}return function(e){setTimeout(e,0)}}(),n.title="browser",n.browser=!0,n.env={},n.argv=[],n.on=r,n.addListener=r,n.once=r,n.off=r,n.removeListener=r,n.removeAllListeners=r,n.emit=r,n.binding=function(){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(){throw new Error("process.chdir is not supported")}},{}],19:[function(e,t){function r(e,t){return a.apply(e,t),e}function n(e){var t,r,n=[0,0,0],i=e.length;for(t=0;t<e.length;t+=1)r=e[t],n[0]+=r[0],n[1]+=r[1],n[2]+=r[2];return n[0]/=i,n[1]/=i,n[2]/=i,n}function i(e){var t,i,o,s=r([n(e)],e),c=[];for(t=0;t<s.length;t+=1)for(i=0;4>i;i+=1)o=u[i].slice(0),o[4*i]=s[t][0],o[4*i+1]=s[t][1],o[4*i+2]=s[t][2],c.push(o);return c}function o(e,t,r){function i(e){var i,s,u=n(e);for(u.push(1),s=0;s<e.length;s+=1)Array.prototype.push.apply(u,e[s]),u.push(1);for(i=c.dot(o,u),s=0;16>s;s+=1)0===t[s]?i[s]=0:i[s]/=t[s];return i=c.dot(r,i),[i.slice(0,4),i.slice(4,8),i.slice(8,12),[0,0,0,1]]}var o=c.transpose(e);return e=null,i}function s(e){var t=i(e),r=c.svd(t);return o(r.U,r.S,r.V)}t.exports=s;var u=[[0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1]],c=e("numeric"),a=Array.prototype.push},{numeric:20}],20:[function(require,module,exports){(function(global){"use strict";var numeric="undefined"==typeof exports?function(){}:exports;"undefined"!=typeof global&&(global.numeric=numeric),numeric.version="1.2.6",numeric.bench=function(e,t){var r,n,i,o;for("undefined"==typeof t&&(t=15),i=.5,r=new Date;;){for(i*=2,o=i;o>3;o-=4)e(),e(),e(),e();for(;o>0;)e(),o--;if(n=new Date,n-r>t)break}for(o=i;o>3;o-=4)e(),e(),e(),e();for(;o>0;)e(),o--;return n=new Date,1e3*(3*i-1)/(n-r)},numeric._myIndexOf=function(e){var t,r=this.length;for(t=0;r>t;++t)if(this[t]===e)return t;return-1},numeric.myIndexOf=Array.prototype.indexOf?Array.prototype.indexOf:numeric._myIndexOf,numeric.Function=Function,numeric.precision=4,numeric.largeArray=50,numeric.prettyPrint=function(e){function t(e){if(0===e)return"0";if(isNaN(e))return"NaN";if(0>e)return"-"+t(-e);if(isFinite(e)){var r=Math.floor(Math.log(e)/Math.log(10)),n=e/Math.pow(10,r),i=n.toPrecision(numeric.precision);return 10===parseFloat(i)&&(r++,n=1,i=n.toPrecision(numeric.precision)),parseFloat(i).toString()+"e"+r.toString()}return"Infinity"}function r(e){var i;if("undefined"==typeof e)return n.push(Array(numeric.precision+8).join(" ")),!1;if("string"==typeof e)return n.push('"'+e+'"'),!1;if("boolean"==typeof e)return n.push(e.toString()),!1;if("number"==typeof e){var o=t(e),s=e.toPrecision(numeric.precision),u=parseFloat(e.toString()).toString(),c=[o,s,u,parseFloat(s).toString(),parseFloat(u).toString()];for(i=1;i<c.length;i++)c[i].length<o.length&&(o=c[i]);return n.push(Array(numeric.precision+8-o.length).join(" ")+o),!1}if(null===e)return n.push("null"),!1;if("function"==typeof e){n.push(e.toString());var a=!1;for(i in e)e.hasOwnProperty(i)&&(n.push(a?",\n":"\n{"),a=!0,n.push(i),n.push(": \n"),r(e[i]));return a&&n.push("}\n"),!0}if(e instanceof Array){if(e.length>numeric.largeArray)return n.push("...Large Array..."),!0;var a=!1;for(n.push("["),i=0;i<e.length;i++)i>0&&(n.push(","),a&&n.push("\n ")),a=r(e[i]);return n.push("]"),!0}n.push("{");var a=!1;for(i in e)e.hasOwnProperty(i)&&(a&&n.push(",\n"),a=!0,n.push(i),n.push(": \n"),r(e[i]));return n.push("}"),!0}var n=[];return r(e),n.join("")},numeric.parseDate=function(e){function t(e){if("string"==typeof e)return Date.parse(e.replace(/-/g,"/"));if(!(e instanceof Array))throw new Error("parseDate: parameter must be arrays of strings");var r,n=[];for(r=0;r<e.length;r++)n[r]=t(e[r]);return n}return t(e)},numeric.parseFloat=function(e){function t(e){if("string"==typeof e)return parseFloat(e);if(!(e instanceof Array))throw new Error("parseFloat: parameter must be arrays of strings");var r,n=[];for(r=0;r<e.length;r++)n[r]=t(e[r]);return n}return t(e)},numeric.parseCSV=function(e){var t,r,n=e.split("\n"),i=[],o=/(([^'",]*)|('[^']*')|("[^"]*")),/g,s=/^\s*(([+-]?[0-9]+(\.[0-9]*)?(e[+-]?[0-9]+)?)|([+-]?[0-9]*(\.[0-9]+)?(e[+-]?[0-9]+)?))\s*$/,u=function(e){return e.substr(0,e.length-1)},c=0;for(r=0;r<n.length;r++){var a,f=(n[r]+",").match(o);if(f.length>0){for(i[c]=[],t=0;t<f.length;t++)a=u(f[t]),i[c][t]=s.test(a)?parseFloat(a):a;c++}}return i},numeric.toCSV=function(e){var t,r,n,i,o,s,u=numeric.dim(e);for(n=u[0],i=u[1],s=[],t=0;n>t;t++){for(o=[],r=0;n>r;r++)o[r]=e[t][r].toString();s[t]=o.join(", ")}return s.join("\n")+"\n"},numeric.getURL=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(),t},numeric.imageURL=function(e){function t(e){var t,r,n,i,o,s,u,c,a=e.length,f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",h="";for(t=0;a>t;t+=3)r=e[t],n=e[t+1],i=e[t+2],o=r>>2,s=((3&r)<<4)+(n>>4),u=((15&n)<<2)+(i>>6),c=63&i,t+1>=a?u=c=64:t+2>=a&&(c=64),h+=f.charAt(o)+f.charAt(s)+f.charAt(u)+f.charAt(c);return h}function r(e,t,r){"undefined"==typeof t&&(t=0),"undefined"==typeof r&&(r=e.length);{var n,i=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],o=-1,s=0;e.length}for(n=t;r>n;n++)s=255&(o^e[n]),o=o>>>8^i[s];return-1^o}var n,i,o,s,u,c,a,f,h,p,l=e[0].length,m=e[0][0].length,d=[137,80,78,71,13,10,26,10,0,0,0,13,73,72,68,82,m>>24&255,m>>16&255,m>>8&255,255&m,l>>24&255,l>>16&255,l>>8&255,255&l,8,2,0,0,0,-1,-2,-3,-4,-5,-6,-7,-8,73,68,65,84,8,29];for(p=r(d,12,29),d[29]=p>>24&255,d[30]=p>>16&255,d[31]=p>>8&255,d[32]=255&p,n=1,i=0,a=0;l>a;a++){for(d.push(l-1>a?0:1),u=3*m+1+(0===a)&255,c=3*m+1+(0===a)>>8&255,d.push(u),d.push(c),d.push(255&~u),d.push(255&~c),0===a&&d.push(0),f=0;m>f;f++)for(o=0;3>o;o++)u=e[o][a][f],u=u>255?255:0>u?0:Math.round(u),n=(n+u)%65521,i=(i+n)%65521,d.push(u);d.push(0)}return h=(i<<16)+n,d.push(h>>24&255),d.push(h>>16&255),d.push(h>>8&255),d.push(255&h),s=d.length-41,d[33]=s>>24&255,d[34]=s>>16&255,d[35]=s>>8&255,d[36]=255&s,p=r(d,37),d.push(p>>24&255),d.push(p>>16&255),d.push(p>>8&255),d.push(255&p),d.push(0),d.push(0),d.push(0),d.push(0),d.push(73),d.push(69),d.push(78),d.push(68),d.push(174),d.push(66),d.push(96),d.push(130),"data:image/png;base64,"+t(d)},numeric._dim=function(e){for(var t=[];"object"==typeof e;)t.push(e.length),e=e[0];return t},numeric.dim=function(e){var t,r;return"object"==typeof e?(t=e[0],"object"==typeof t?(r=t[0],"object"==typeof r?numeric._dim(e):[e.length,t.length]):[e.length]):[]},numeric.mapreduce=function(e,t){return Function("x","accum","_s","_k",'if(typeof accum === "undefined") accum = '+t+';\nif(typeof x === "number") { var xi = x; '+e+'; return accum; }\nif(typeof _s === "undefined") _s = numeric.dim(x);\nif(typeof _k === "undefined") _k = 0;\nvar _n = _s[_k];\nvar i,xi;\nif(_k < _s.length-1) {\n    for(i=_n-1;i>=0;i--) {\n        accum = arguments.callee(x[i],accum,_s,_k+1);\n    }    return accum;\n}\nfor(i=_n-1;i>=1;i-=2) { \n    xi = x[i];\n    '+e+";\n    xi = x[i-1];\n    "+e+";\n}\nif(i === 0) {\n    xi = x[i];\n    "+e+"\n}\nreturn accum;")},numeric.mapreduce2=function(e,t){return Function("x","var n = x.length;\nvar i,xi;\n"+t+";\nfor(i=n-1;i!==-1;--i) { \n    xi = x[i];\n    "+e+";\n}\nreturn accum;")},numeric.same=function e(t,r){var n,i;if(!(t instanceof Array&&r instanceof Array))return!1;if(i=t.length,i!==r.length)return!1;for(n=0;i>n;n++)if(t[n]!==r[n]){if("object"!=typeof t[n])return!1;if(!e(t[n],r[n]))return!1}return!0},numeric.rep=function(e,t,r){"undefined"==typeof r&&(r=0);var n,i=e[r],o=Array(i);if(r===e.length-1){for(n=i-2;n>=0;n-=2)o[n+1]=t,o[n]=t;return-1===n&&(o[0]=t),o}for(n=i-1;n>=0;n--)o[n]=numeric.rep(e,t,r+1);return o},numeric.dotMMsmall=function(e,t){var r,n,i,o,s,u,c,a,f,h,p;for(o=e.length,s=t.length,u=t[0].length,c=Array(o),r=o-1;r>=0;r--){for(a=Array(u),f=e[r],i=u-1;i>=0;i--){for(h=f[s-1]*t[s-1][i],n=s-2;n>=1;n-=2)p=n-1,h+=f[n]*t[n][i]+f[p]*t[p][i];0===n&&(h+=f[0]*t[0][i]),a[i]=h}c[r]=a}return c},numeric._getCol=function(e,t,r){var n,i=e.length;for(n=i-1;n>0;--n)r[n]=e[n][t],--n,r[n]=e[n][t];0===n&&(r[0]=e[0][t])},numeric.dotMMbig=function(e,t){var r,n,i,o,s=numeric._getCol,u=t.length,c=Array(u),a=e.length,f=t[0].length,h=new Array(a),p=numeric.dotVV;for(--u,--a,n=a;-1!==n;--n)h[n]=Array(f);for(--f,n=f;-1!==n;--n)for(s(t,n,c),i=a;-1!==i;--i)o=0,r=e[i],h[i][n]=p(r,c);return h},numeric.dotMV=function(e,t){var r,n=e.length,i=(t.length,Array(n)),o=numeric.dotVV;for(r=n-1;r>=0;r--)i[r]=o(e[r],t);return i},numeric.dotVM=function(e,t){var r,n,i,o,s,u,c;for(i=e.length,o=t[0].length,s=Array(o),n=o-1;n>=0;n--){for(u=e[i-1]*t[i-1][n],r=i-2;r>=1;r-=2)c=r-1,u+=e[r]*t[r][n]+e[c]*t[c][n];0===r&&(u+=e[0]*t[0][n]),s[n]=u}return s},numeric.dotVV=function(e,t){var r,n,i=e.length,o=e[i-1]*t[i-1];for(r=i-2;r>=1;r-=2)n=r-1,o+=e[r]*t[r]+e[n]*t[n];return 0===r&&(o+=e[0]*t[0]),o},numeric.dot=function(e,t){var r=numeric.dim;switch(1e3*r(e).length+r(t).length){case 2002:return t.length<10?numeric.dotMMsmall(e,t):numeric.dotMMbig(e,t);case 2001:return numeric.dotMV(e,t);case 1002:return numeric.dotVM(e,t);case 1001:return numeric.dotVV(e,t);case 1e3:return numeric.mulVS(e,t);case 1:return numeric.mulSV(e,t);case 0:return e*t;default:throw new Error("numeric.dot only works on vectors and matrices")}},numeric.diag=function(e){var t,r,n,i,o=e.length,s=Array(o);for(t=o-1;t>=0;t--){for(i=Array(o),r=t+2,n=o-1;n>=r;n-=2)i[n]=0,i[n-1]=0;for(n>t&&(i[n]=0),i[t]=e[t],n=t-1;n>=1;n-=2)i[n]=0,i[n-1]=0;0===n&&(i[0]=0),s[t]=i}return s},numeric.getDiag=function(e){var t,r=Math.min(e.length,e[0].length),n=Array(r);for(t=r-1;t>=1;--t)n[t]=e[t][t],--t,n[t]=e[t][t];return 0===t&&(n[0]=e[0][0]),n},numeric.identity=function(e){return numeric.diag(numeric.rep([e],1))},numeric.pointwise=function(e,t,r){"undefined"==typeof r&&(r="");var n,i,o=[],s=/\[i\]$/,u="",c=!1;for(n=0;n<e.length;n++)s.test(e[n])?(i=e[n].substring(0,e[n].length-3),u=i):i=e[n],"ret"===i&&(c=!0),o.push(i);return o[e.length]="_s",o[e.length+1]="_k",o[e.length+2]='if(typeof _s === "undefined") _s = numeric.dim('+u+');\nif(typeof _k === "undefined") _k = 0;\nvar _n = _s[_k];\nvar i'+(c?"":", ret = Array(_n)")+";\nif(_k < _s.length-1) {\n    for(i=_n-1;i>=0;i--) ret[i] = arguments.callee("+e.join(",")+",_s,_k+1);\n    return ret;\n}\n"+r+"\nfor(i=_n-1;i!==-1;--i) {\n    "+t+"\n}\nreturn ret;",Function.apply(null,o)},numeric.pointwise2=function(e,t,r){"undefined"==typeof r&&(r="");var n,i,o=[],s=/\[i\]$/,u="",c=!1;for(n=0;n<e.length;n++)s.test(e[n])?(i=e[n].substring(0,e[n].length-3),u=i):i=e[n],"ret"===i&&(c=!0),o.push(i);
return o[e.length]="var _n = "+u+".length;\nvar i"+(c?"":", ret = Array(_n)")+";\n"+r+"\nfor(i=_n-1;i!==-1;--i) {\n"+t+"\n}\nreturn ret;",Function.apply(null,o)},numeric._biforeach=function t(e,r,n,i,o){if(i===n.length-1)return void o(e,r);var s,u=n[i];for(s=u-1;s>=0;s--)t("object"==typeof e?e[s]:e,"object"==typeof r?r[s]:r,n,i+1,o)},numeric._biforeach2=function r(e,t,n,i,o){if(i===n.length-1)return o(e,t);var s,u=n[i],c=Array(u);for(s=u-1;s>=0;--s)c[s]=r("object"==typeof e?e[s]:e,"object"==typeof t?t[s]:t,n,i+1,o);return c},numeric._foreach=function n(e,t,r,i){if(r===t.length-1)return void i(e);var o,s=t[r];for(o=s-1;o>=0;o--)n(e[o],t,r+1,i)},numeric._foreach2=function i(e,t,r,n){if(r===t.length-1)return n(e);var o,s=t[r],u=Array(s);for(o=s-1;o>=0;o--)u[o]=i(e[o],t,r+1,n);return u},numeric.ops2={add:"+",sub:"-",mul:"*",div:"/",mod:"%",and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">=",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"},numeric.opseq={addeq:"+=",subeq:"-=",muleq:"*=",diveq:"/=",modeq:"%=",lshifteq:"<<=",rshifteq:">>=",rrshifteq:">>>=",bandeq:"&=",boreq:"|=",bxoreq:"^="},numeric.mathfuns=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan","isNaN","isFinite"],numeric.mathfuns2=["atan2","pow","max","min"],numeric.ops1={neg:"-",not:"!",bnot:"~",clone:""},numeric.mapreducers={any:["if(xi) return true;","var accum = false;"],all:["if(!xi) return false;","var accum = true;"],sum:["accum += xi;","var accum = 0;"],prod:["accum *= xi;","var accum = 1;"],norm2Squared:["accum += xi*xi;","var accum = 0;"],norminf:["accum = max(accum,abs(xi));","var accum = 0, max = Math.max, abs = Math.abs;"],norm1:["accum += abs(xi)","var accum = 0, abs = Math.abs;"],sup:["accum = max(accum,xi);","var accum = -Infinity, max = Math.max;"],inf:["accum = min(accum,xi);","var accum = Infinity, min = Math.min;"]},function(){var e,t;for(e=0;e<numeric.mathfuns2.length;++e)t=numeric.mathfuns2[e],numeric.ops2[t]=t;for(e in numeric.ops2)if(numeric.ops2.hasOwnProperty(e)){t=numeric.ops2[e];var r,n,i="";-1!==numeric.myIndexOf.call(numeric.mathfuns2,e)?(i="var "+t+" = Math."+t+";\n",r=function(e,r,n){return e+" = "+t+"("+r+","+n+")"},n=function(e,r){return e+" = "+t+"("+e+","+r+")"}):(r=function(e,r,n){return e+" = "+r+" "+t+" "+n},n=numeric.opseq.hasOwnProperty(e+"eq")?function(e,r){return e+" "+t+"= "+r}:function(e,r){return e+" = "+e+" "+t+" "+r}),numeric[e+"VV"]=numeric.pointwise2(["x[i]","y[i]"],r("ret[i]","x[i]","y[i]"),i),numeric[e+"SV"]=numeric.pointwise2(["x","y[i]"],r("ret[i]","x","y[i]"),i),numeric[e+"VS"]=numeric.pointwise2(["x[i]","y"],r("ret[i]","x[i]","y"),i),numeric[e]=Function("var n = arguments.length, i, x = arguments[0], y;\nvar VV = numeric."+e+"VV, VS = numeric."+e+"VS, SV = numeric."+e+'SV;\nvar dim = numeric.dim;\nfor(i=1;i!==n;++i) { \n  y = arguments[i];\n  if(typeof x === "object") {\n      if(typeof y === "object") x = numeric._biforeach2(x,y,dim(x),0,VV);\n      else x = numeric._biforeach2(x,y,dim(x),0,VS);\n  } else if(typeof y === "object") x = numeric._biforeach2(x,y,dim(y),0,SV);\n  else '+n("x","y")+"\n}\nreturn x;\n"),numeric[t]=numeric[e],numeric[e+"eqV"]=numeric.pointwise2(["ret[i]","x[i]"],n("ret[i]","x[i]"),i),numeric[e+"eqS"]=numeric.pointwise2(["ret[i]","x"],n("ret[i]","x"),i),numeric[e+"eq"]=Function("var n = arguments.length, i, x = arguments[0], y;\nvar V = numeric."+e+"eqV, S = numeric."+e+'eqS\nvar s = numeric.dim(x);\nfor(i=1;i!==n;++i) { \n  y = arguments[i];\n  if(typeof y === "object") numeric._biforeach(x,y,s,0,V);\n  else numeric._biforeach(x,y,s,0,S);\n}\nreturn x;\n')}for(e=0;e<numeric.mathfuns2.length;++e)t=numeric.mathfuns2[e],delete numeric.ops2[t];for(e=0;e<numeric.mathfuns.length;++e)t=numeric.mathfuns[e],numeric.ops1[t]=t;for(e in numeric.ops1)numeric.ops1.hasOwnProperty(e)&&(i="",t=numeric.ops1[e],-1!==numeric.myIndexOf.call(numeric.mathfuns,e)&&Math.hasOwnProperty(t)&&(i="var "+t+" = Math."+t+";\n"),numeric[e+"eqV"]=numeric.pointwise2(["ret[i]"],"ret[i] = "+t+"(ret[i]);",i),numeric[e+"eq"]=Function("x",'if(typeof x !== "object") return '+t+"x\nvar i;\nvar V = numeric."+e+"eqV;\nvar s = numeric.dim(x);\nnumeric._foreach(x,s,0,V);\nreturn x;\n"),numeric[e+"V"]=numeric.pointwise2(["x[i]"],"ret[i] = "+t+"(x[i]);",i),numeric[e]=Function("x",'if(typeof x !== "object") return '+t+"(x)\nvar i;\nvar V = numeric."+e+"V;\nvar s = numeric.dim(x);\nreturn numeric._foreach2(x,s,0,V);\n"));for(e=0;e<numeric.mathfuns.length;++e)t=numeric.mathfuns[e],delete numeric.ops1[t];for(e in numeric.mapreducers)numeric.mapreducers.hasOwnProperty(e)&&(t=numeric.mapreducers[e],numeric[e+"V"]=numeric.mapreduce2(t[0],t[1]),numeric[e]=Function("x","s","k",t[1]+'if(typeof x !== "object") {    xi = x;\n'+t[0]+';\n    return accum;\n}if(typeof s === "undefined") s = numeric.dim(x);\nif(typeof k === "undefined") k = 0;\nif(k === s.length-1) return numeric.'+e+"V(x);\nvar xi;\nvar n = x.length, i;\nfor(i=n-1;i!==-1;--i) {\n   xi = arguments.callee(x[i]);\n"+t[0]+";\n}\nreturn accum;\n"))}(),numeric.truncVV=numeric.pointwise(["x[i]","y[i]"],"ret[i] = round(x[i]/y[i])*y[i];","var round = Math.round;"),numeric.truncVS=numeric.pointwise(["x[i]","y"],"ret[i] = round(x[i]/y)*y;","var round = Math.round;"),numeric.truncSV=numeric.pointwise(["x","y[i]"],"ret[i] = round(x/y[i])*y[i];","var round = Math.round;"),numeric.trunc=function(e,t){return"object"==typeof e?"object"==typeof t?numeric.truncVV(e,t):numeric.truncVS(e,t):"object"==typeof t?numeric.truncSV(e,t):Math.round(e/t)*t},numeric.inv=function(e){var t,r,n,i,o,s,u,e,c=numeric.dim(e),a=Math.abs,f=c[0],h=c[1],p=numeric.clone(e),l=numeric.identity(f);for(s=0;h>s;++s){var m=-1,d=-1;for(o=s;o!==f;++o)u=a(p[o][s]),u>d&&(m=o,d=u);for(r=p[m],p[m]=p[s],p[s]=r,i=l[m],l[m]=l[s],l[s]=i,e=r[s],u=s;u!==h;++u)r[u]/=e;for(u=h-1;-1!==u;--u)i[u]/=e;for(o=f-1;-1!==o;--o)if(o!==s){for(t=p[o],n=l[o],e=t[s],u=s+1;u!==h;++u)t[u]-=r[u]*e;for(u=h-1;u>0;--u)n[u]-=i[u]*e,--u,n[u]-=i[u]*e;0===u&&(n[0]-=i[0]*e)}}return l},numeric.det=function(e){var t=numeric.dim(e);if(2!==t.length||t[0]!==t[1])throw new Error("numeric: det() only works on square matrices");var r,n,i,o,s,u,c,a,f=t[0],h=1,p=numeric.clone(e);for(n=0;f-1>n;n++){for(i=n,r=n+1;f>r;r++)Math.abs(p[r][n])>Math.abs(p[i][n])&&(i=r);for(i!==n&&(c=p[i],p[i]=p[n],p[n]=c,h*=-1),o=p[n],r=n+1;f>r;r++){for(s=p[r],u=s[n]/o[n],i=n+1;f-1>i;i+=2)a=i+1,s[i]-=o[i]*u,s[a]-=o[a]*u;i!==f&&(s[i]-=o[i]*u)}if(0===o[n])return 0;h*=o[n]}return h*p[n][n]},numeric.transpose=function(e){var t,r,n,i,o,s=e.length,u=e[0].length,c=Array(u);for(r=0;u>r;r++)c[r]=Array(s);for(t=s-1;t>=1;t-=2){for(i=e[t],n=e[t-1],r=u-1;r>=1;--r)o=c[r],o[t]=i[r],o[t-1]=n[r],--r,o=c[r],o[t]=i[r],o[t-1]=n[r];0===r&&(o=c[0],o[t]=i[0],o[t-1]=n[0])}if(0===t){for(n=e[0],r=u-1;r>=1;--r)c[r][0]=n[r],--r,c[r][0]=n[r];0===r&&(c[0][0]=n[0])}return c},numeric.negtranspose=function(e){var t,r,n,i,o,s=e.length,u=e[0].length,c=Array(u);for(r=0;u>r;r++)c[r]=Array(s);for(t=s-1;t>=1;t-=2){for(i=e[t],n=e[t-1],r=u-1;r>=1;--r)o=c[r],o[t]=-i[r],o[t-1]=-n[r],--r,o=c[r],o[t]=-i[r],o[t-1]=-n[r];0===r&&(o=c[0],o[t]=-i[0],o[t-1]=-n[0])}if(0===t){for(n=e[0],r=u-1;r>=1;--r)c[r][0]=-n[r],--r,c[r][0]=-n[r];0===r&&(c[0][0]=-n[0])}return c},numeric._random=function o(e,t){var r,n,i=e[t],s=Array(i);if(t===e.length-1){for(n=Math.random,r=i-1;r>=1;r-=2)s[r]=n(),s[r-1]=n();return 0===r&&(s[0]=n()),s}for(r=i-1;r>=0;r--)s[r]=o(e,t+1);return s},numeric.random=function(e){return numeric._random(e,0)},numeric.norm2=function(e){return Math.sqrt(numeric.norm2Squared(e))},numeric.linspace=function(e,t,r){if("undefined"==typeof r&&(r=Math.max(Math.round(t-e)+1,1)),2>r)return 1===r?[e]:[];var n,i=Array(r);for(r--,n=r;n>=0;n--)i[n]=(n*t+(r-n)*e)/r;return i},numeric.getBlock=function(e,t,r){function n(e,o){var s,u=t[o],c=r[o]-u,a=Array(c);if(o===i.length-1){for(s=c;s>=0;s--)a[s]=e[s+u];return a}for(s=c;s>=0;s--)a[s]=n(e[s+u],o+1);return a}var i=numeric.dim(e);return n(e,0)},numeric.setBlock=function(e,t,r,n){function i(e,n,s){var u,c=t[s],a=r[s]-c;if(s===o.length-1)for(u=a;u>=0;u--)e[u+c]=n[u];for(u=a;u>=0;u--)i(e[u+c],n[u],s+1)}var o=numeric.dim(e);return i(e,n,0),e},numeric.getRange=function(e,t,r){var n,i,o,s,u=t.length,c=r.length,a=Array(u);for(n=u-1;-1!==n;--n)for(a[n]=Array(c),o=a[n],s=e[t[n]],i=c-1;-1!==i;--i)o[i]=s[r[i]];return a},numeric.blockMatrix=function(e){var t=numeric.dim(e);if(t.length<4)return numeric.blockMatrix([e]);var r,n,i,o,s,u=t[0],c=t[1];for(r=0,n=0,i=0;u>i;++i)r+=e[i][0].length;for(o=0;c>o;++o)n+=e[0][o][0].length;var a=Array(r);for(i=0;r>i;++i)a[i]=Array(n);var f,h,p,l,m,d=0;for(i=0;u>i;++i){for(f=n,o=c-1;-1!==o;--o)for(s=e[i][o],f-=s[0].length,p=s.length-1;-1!==p;--p)for(m=s[p],h=a[d+p],l=m.length-1;-1!==l;--l)h[f+l]=m[l];d+=e[i][0].length}return a},numeric.tensor=function(e,t){if("number"==typeof e||"number"==typeof t)return numeric.mul(e,t);var r=numeric.dim(e),n=numeric.dim(t);if(1!==r.length||1!==n.length)throw new Error("numeric: tensor product is only defined for vectors");var i,o,s,u,c=r[0],a=n[0],f=Array(c);for(o=c-1;o>=0;o--){for(i=Array(a),u=e[o],s=a-1;s>=3;--s)i[s]=u*t[s],--s,i[s]=u*t[s],--s,i[s]=u*t[s],--s,i[s]=u*t[s];for(;s>=0;)i[s]=u*t[s],--s;f[o]=i}return f},numeric.T=function(e,t){this.x=e,this.y=t},numeric.t=function(e,t){return new numeric.T(e,t)},numeric.Tbinop=function(e,t,r,n,i){numeric.indexOf;if("string"!=typeof i){var o;i="";for(o in numeric)numeric.hasOwnProperty(o)&&(e.indexOf(o)>=0||t.indexOf(o)>=0||r.indexOf(o)>=0||n.indexOf(o)>=0)&&o.length>1&&(i+="var "+o+" = numeric."+o+";\n")}return Function(["y"],"var x = this;\nif(!(y instanceof numeric.T)) { y = new numeric.T(y); }\n"+i+"\nif(x.y) {  if(y.y) {    return new numeric.T("+n+");\n  }\n  return new numeric.T("+r+");\n}\nif(y.y) {\n  return new numeric.T("+t+");\n}\nreturn new numeric.T("+e+");\n")},numeric.T.prototype.add=numeric.Tbinop("add(x.x,y.x)","add(x.x,y.x),y.y","add(x.x,y.x),x.y","add(x.x,y.x),add(x.y,y.y)"),numeric.T.prototype.sub=numeric.Tbinop("sub(x.x,y.x)","sub(x.x,y.x),neg(y.y)","sub(x.x,y.x),x.y","sub(x.x,y.x),sub(x.y,y.y)"),numeric.T.prototype.mul=numeric.Tbinop("mul(x.x,y.x)","mul(x.x,y.x),mul(x.x,y.y)","mul(x.x,y.x),mul(x.y,y.x)","sub(mul(x.x,y.x),mul(x.y,y.y)),add(mul(x.x,y.y),mul(x.y,y.x))"),numeric.T.prototype.reciprocal=function(){var e=numeric.mul,t=numeric.div;if(this.y){var r=numeric.add(e(this.x,this.x),e(this.y,this.y));return new numeric.T(t(this.x,r),t(numeric.neg(this.y),r))}return new T(t(1,this.x))},numeric.T.prototype.div=function s(e){if(e instanceof numeric.T||(e=new numeric.T(e)),e.y)return this.mul(e.reciprocal());var s=numeric.div;return this.y?new numeric.T(s(this.x,e.x),s(this.y,e.x)):new numeric.T(s(this.x,e.x))},numeric.T.prototype.dot=numeric.Tbinop("dot(x.x,y.x)","dot(x.x,y.x),dot(x.x,y.y)","dot(x.x,y.x),dot(x.y,y.x)","sub(dot(x.x,y.x),dot(x.y,y.y)),add(dot(x.x,y.y),dot(x.y,y.x))"),numeric.T.prototype.transpose=function(){var e=numeric.transpose,t=this.x,r=this.y;return r?new numeric.T(e(t),e(r)):new numeric.T(e(t))},numeric.T.prototype.transjugate=function(){var e=numeric.transpose,t=this.x,r=this.y;return r?new numeric.T(e(t),numeric.negtranspose(r)):new numeric.T(e(t))},numeric.Tunop=function(e,t,r){return"string"!=typeof r&&(r=""),Function("var x = this;\n"+r+"\nif(x.y) {  "+t+";\n}\n"+e+";\n")},numeric.T.prototype.exp=numeric.Tunop("return new numeric.T(ex)","return new numeric.T(mul(cos(x.y),ex),mul(sin(x.y),ex))","var ex = numeric.exp(x.x), cos = numeric.cos, sin = numeric.sin, mul = numeric.mul;"),numeric.T.prototype.conj=numeric.Tunop("return new numeric.T(x.x);","return new numeric.T(x.x,numeric.neg(x.y));"),numeric.T.prototype.neg=numeric.Tunop("return new numeric.T(neg(x.x));","return new numeric.T(neg(x.x),neg(x.y));","var neg = numeric.neg;"),numeric.T.prototype.sin=numeric.Tunop("return new numeric.T(numeric.sin(x.x))","return x.exp().sub(x.neg().exp()).div(new numeric.T(0,2));"),numeric.T.prototype.cos=numeric.Tunop("return new numeric.T(numeric.cos(x.x))","return x.exp().add(x.neg().exp()).div(2);"),numeric.T.prototype.abs=numeric.Tunop("return new numeric.T(numeric.abs(x.x));","return new numeric.T(numeric.sqrt(numeric.add(mul(x.x,x.x),mul(x.y,x.y))));","var mul = numeric.mul;"),numeric.T.prototype.log=numeric.Tunop("return new numeric.T(numeric.log(x.x));","var theta = new numeric.T(numeric.atan2(x.y,x.x)), r = x.abs();\nreturn new numeric.T(numeric.log(r.x),theta.x);"),numeric.T.prototype.norm2=numeric.Tunop("return numeric.norm2(x.x);","var f = numeric.norm2Squared;\nreturn Math.sqrt(f(x.x)+f(x.y));"),numeric.T.prototype.inv=function(){var e=this;if("undefined"==typeof e.y)return new numeric.T(numeric.inv(e.x));var t,r,n,i,o,s,u,c,a,f,h,t,r,n,p,l,m,d,g,y,v,x=e.x.length,w=numeric.identity(x),b=numeric.rep([x,x],0),S=numeric.clone(e.x),P=numeric.clone(e.y);for(t=0;x>t;t++){for(m=S[t][t],d=P[t][t],p=m*m+d*d,n=t,r=t+1;x>r;r++)m=S[r][t],d=P[r][t],l=m*m+d*d,l>p&&(n=r,p=l);for(n!==t&&(v=S[t],S[t]=S[n],S[n]=v,v=P[t],P[t]=P[n],P[n]=v,v=w[t],w[t]=w[n],w[n]=v,v=b[t],b[t]=b[n],b[n]=v),i=S[t],o=P[t],c=w[t],a=b[t],m=i[t],d=o[t],r=t+1;x>r;r++)g=i[r],y=o[r],i[r]=(g*m+y*d)/p,o[r]=(y*m-g*d)/p;for(r=0;x>r;r++)g=c[r],y=a[r],c[r]=(g*m+y*d)/p,a[r]=(y*m-g*d)/p;for(r=t+1;x>r;r++){for(s=S[r],u=P[r],f=w[r],h=b[r],m=s[t],d=u[t],n=t+1;x>n;n++)g=i[n],y=o[n],s[n]-=g*m-y*d,u[n]-=y*m+g*d;for(n=0;x>n;n++)g=c[n],y=a[n],f[n]-=g*m-y*d,h[n]-=y*m+g*d}}for(t=x-1;t>0;t--)for(c=w[t],a=b[t],r=t-1;r>=0;r--)for(f=w[r],h=b[r],m=S[r][t],d=P[r][t],n=x-1;n>=0;n--)g=c[n],y=a[n],f[n]-=m*g-d*y,h[n]-=m*y+d*g;return new numeric.T(w,b)},numeric.T.prototype.get=function(e){var t,r=this.x,n=this.y,i=0,o=e.length;if(n){for(;o>i;)t=e[i],r=r[t],n=n[t],i++;return new numeric.T(r,n)}for(;o>i;)t=e[i],r=r[t],i++;return new numeric.T(r)},numeric.T.prototype.set=function(e,t){var r,n=this.x,i=this.y,o=0,s=e.length,u=t.x,c=t.y;if(0===s)return c?this.y=c:i&&(this.y=void 0),this.x=n,this;if(c){for(i||(i=numeric.rep(numeric.dim(n),0),this.y=i);s-1>o;)r=e[o],n=n[r],i=i[r],o++;return r=e[o],n[r]=u,i[r]=c,this}if(i){for(;s-1>o;)r=e[o],n=n[r],i=i[r],o++;return r=e[o],n[r]=u,i[r]=u instanceof Array?numeric.rep(numeric.dim(u),0):0,this}for(;s-1>o;)r=e[o],n=n[r],o++;return r=e[o],n[r]=u,this},numeric.T.prototype.getRows=function(e,t){var r,n,i=t-e+1,o=Array(i),s=this.x,u=this.y;for(r=e;t>=r;r++)o[r-e]=s[r];if(u){for(n=Array(i),r=e;t>=r;r++)n[r-e]=u[r];return new numeric.T(o,n)}return new numeric.T(o)},numeric.T.prototype.setRows=function(e,t,r){var n,i=this.x,o=this.y,s=r.x,u=r.y;for(n=e;t>=n;n++)i[n]=s[n-e];if(u)for(o||(o=numeric.rep(numeric.dim(i),0),this.y=o),n=e;t>=n;n++)o[n]=u[n-e];else if(o)for(n=e;t>=n;n++)o[n]=numeric.rep([s[n-e].length],0);return this},numeric.T.prototype.getRow=function(e){var t=this.x,r=this.y;return r?new numeric.T(t[e],r[e]):new numeric.T(t[e])},numeric.T.prototype.setRow=function(e,t){var r=this.x,n=this.y,i=t.x,o=t.y;return r[e]=i,o?(n||(n=numeric.rep(numeric.dim(r),0),this.y=n),n[e]=o):n&&(n=numeric.rep([i.length],0)),this},numeric.T.prototype.getBlock=function(e,t){var r=this.x,n=this.y,i=numeric.getBlock;return n?new numeric.T(i(r,e,t),i(n,e,t)):new numeric.T(i(r,e,t))},numeric.T.prototype.setBlock=function(e,t,r){r instanceof numeric.T||(r=new numeric.T(r));var n=this.x,i=this.y,o=numeric.setBlock,s=r.x,u=r.y;return u?(i||(this.y=numeric.rep(numeric.dim(this),0),i=this.y),o(n,e,t,s),o(i,e,t,u),this):(o(n,e,t,s),void(i&&o(i,e,t,numeric.rep(numeric.dim(s),0))))},numeric.T.rep=function(e,t){var r=numeric.T;t instanceof r||(t=new r(t));var n=t.x,i=t.y,o=numeric.rep;return i?new r(o(e,n),o(e,i)):new r(o(e,n))},numeric.T.diag=function u(e){e instanceof numeric.T||(e=new numeric.T(e));var t=e.x,r=e.y,u=numeric.diag;return r?new numeric.T(u(t),u(r)):new numeric.T(u(t))},numeric.T.eig=function(){if(this.y)throw new Error("eig: not implemented for complex matrices.");return numeric.eig(this.x)},numeric.T.identity=function(e){return new numeric.T(numeric.identity(e))},numeric.T.prototype.getDiag=function(){var e=numeric,t=this.x,r=this.y;return r?new e.T(e.getDiag(t),e.getDiag(r)):new e.T(e.getDiag(t))},numeric.house=function(e){var t=numeric.clone(e),r=e[0]>=0?1:-1,n=r*numeric.norm2(e);t[0]+=n;var i=numeric.norm2(t);if(0===i)throw new Error("eig: internal error");return numeric.div(t,i)},numeric.toUpperHessenberg=function(e){var t=numeric.dim(e);if(2!==t.length||t[0]!==t[1])throw new Error("numeric: toUpperHessenberg() only works on square matrices");var r,n,i,o,s,u,c,a,f,h,p=t[0],l=numeric.clone(e),m=numeric.identity(p);for(n=0;p-2>n;n++){for(o=Array(p-n-1),r=n+1;p>r;r++)o[r-n-1]=l[r][n];if(numeric.norm2(o)>0){for(s=numeric.house(o),u=numeric.getBlock(l,[n+1,n],[p-1,p-1]),c=numeric.tensor(s,numeric.dot(s,u)),r=n+1;p>r;r++)for(a=l[r],f=c[r-n-1],i=n;p>i;i++)a[i]-=2*f[i-n];for(u=numeric.getBlock(l,[0,n+1],[p-1,p-1]),c=numeric.tensor(numeric.dot(u,s),s),r=0;p>r;r++)for(a=l[r],f=c[r],i=n+1;p>i;i++)a[i]-=2*f[i-n-1];for(u=Array(p-n-1),r=n+1;p>r;r++)u[r-n-1]=m[r];for(c=numeric.tensor(s,numeric.dot(s,u)),r=n+1;p>r;r++)for(h=m[r],f=c[r-n-1],i=0;p>i;i++)h[i]-=2*f[i]}}return{H:l,Q:m}},numeric.epsilon=2.220446049250313e-16,numeric.QRFrancis=function(e,t){"undefined"==typeof t&&(t=1e4),e=numeric.clone(e);var r,n,i,o,s,u,c,a,f,h,p,l,m,d,g,y,v,x,w=(numeric.clone(e),numeric.dim(e)),b=w[0],S=numeric.identity(b);if(3>b)return{Q:S,B:[[0,b-1]]};var P=numeric.epsilon;for(x=0;t>x;x++){for(y=0;b-1>y;y++)if(Math.abs(e[y+1][y])<P*(Math.abs(e[y][y])+Math.abs(e[y+1][y+1]))){var k=numeric.QRFrancis(numeric.getBlock(e,[0,0],[y,y]),t),T=numeric.QRFrancis(numeric.getBlock(e,[y+1,y+1],[b-1,b-1]),t);for(l=Array(y+1),g=0;y>=g;g++)l[g]=S[g];for(m=numeric.dot(k.Q,l),g=0;y>=g;g++)S[g]=m[g];for(l=Array(b-y-1),g=y+1;b>g;g++)l[g-y-1]=S[g];for(m=numeric.dot(T.Q,l),g=y+1;b>g;g++)S[g]=m[g-y-1];return{Q:S,B:k.B.concat(numeric.add(T.B,y+1))}}if(i=e[b-2][b-2],o=e[b-2][b-1],s=e[b-1][b-2],u=e[b-1][b-1],a=i+u,c=i*u-o*s,f=numeric.getBlock(e,[0,0],[2,2]),a*a>=4*c){var M,A;M=.5*(a+Math.sqrt(a*a-4*c)),A=.5*(a-Math.sqrt(a*a-4*c)),f=numeric.add(numeric.sub(numeric.dot(f,f),numeric.mul(f,M+A)),numeric.diag(numeric.rep([3],M*A)))}else f=numeric.add(numeric.sub(numeric.dot(f,f),numeric.mul(f,a)),numeric.diag(numeric.rep([3],c)));for(r=[f[0][0],f[1][0],f[2][0]],n=numeric.house(r),l=[e[0],e[1],e[2]],m=numeric.tensor(n,numeric.dot(n,l)),g=0;3>g;g++)for(p=e[g],d=m[g],v=0;b>v;v++)p[v]-=2*d[v];for(l=numeric.getBlock(e,[0,0],[b-1,2]),m=numeric.tensor(numeric.dot(l,n),n),g=0;b>g;g++)for(p=e[g],d=m[g],v=0;3>v;v++)p[v]-=2*d[v];for(l=[S[0],S[1],S[2]],m=numeric.tensor(n,numeric.dot(n,l)),g=0;3>g;g++)for(h=S[g],d=m[g],v=0;b>v;v++)h[v]-=2*d[v];var j;for(y=0;b-2>y;y++){for(v=y;y+1>=v;v++)if(Math.abs(e[v+1][v])<P*(Math.abs(e[v][v])+Math.abs(e[v+1][v+1]))){var k=numeric.QRFrancis(numeric.getBlock(e,[0,0],[v,v]),t),T=numeric.QRFrancis(numeric.getBlock(e,[v+1,v+1],[b-1,b-1]),t);for(l=Array(v+1),g=0;v>=g;g++)l[g]=S[g];for(m=numeric.dot(k.Q,l),g=0;v>=g;g++)S[g]=m[g];for(l=Array(b-v-1),g=v+1;b>g;g++)l[g-v-1]=S[g];for(m=numeric.dot(T.Q,l),g=v+1;b>g;g++)S[g]=m[g-v-1];return{Q:S,B:k.B.concat(numeric.add(T.B,v+1))}}for(j=Math.min(b-1,y+3),r=Array(j-y),g=y+1;j>=g;g++)r[g-y-1]=e[g][y];for(n=numeric.house(r),l=numeric.getBlock(e,[y+1,y],[j,b-1]),m=numeric.tensor(n,numeric.dot(n,l)),g=y+1;j>=g;g++)for(p=e[g],d=m[g-y-1],v=y;b>v;v++)p[v]-=2*d[v-y];for(l=numeric.getBlock(e,[0,y+1],[b-1,j]),m=numeric.tensor(numeric.dot(l,n),n),g=0;b>g;g++)for(p=e[g],d=m[g],v=y+1;j>=v;v++)p[v]-=2*d[v-y-1];for(l=Array(j-y),g=y+1;j>=g;g++)l[g-y-1]=S[g];for(m=numeric.tensor(n,numeric.dot(n,l)),g=y+1;j>=g;g++)for(h=S[g],d=m[g-y-1],v=0;b>v;v++)h[v]-=2*d[v]}}throw new Error("numeric: eigenvalue iteration does not converge -- increase maxiter?")},numeric.eig=function(e,t){var r,n,i,o,s,u,c,a,f,h,p,l,m,d,g,y,v,x=numeric.toUpperHessenberg(e),w=numeric.QRFrancis(x.H,t),b=numeric.T,S=e.length,P=w.B,k=numeric.dot(w.Q,numeric.dot(x.H,numeric.transpose(w.Q))),T=new b(numeric.dot(w.Q,x.Q)),M=P.length,A=Math.sqrt;for(n=0;M>n;n++)if(r=P[n][0],r===P[n][1]);else{if(o=r+1,s=k[r][r],u=k[r][o],c=k[o][r],a=k[o][o],0===u&&0===c)continue;f=-s-a,h=s*a-u*c,p=f*f-4*h,p>=0?(l=0>f?-.5*(f-A(p)):-.5*(f+A(p)),y=(s-l)*(s-l)+u*u,v=c*c+(a-l)*(a-l),y>v?(y=A(y),d=(s-l)/y,g=u/y):(v=A(v),d=c/v,g=(a-l)/v),i=new b([[g,-d],[d,g]]),T.setRows(r,o,i.dot(T.getRows(r,o)))):(l=-.5*f,m=.5*A(-p),y=(s-l)*(s-l)+u*u,v=c*c+(a-l)*(a-l),y>v?(y=A(y+m*m),d=(s-l)/y,g=u/y,l=0,m/=y):(v=A(v+m*m),d=c/v,g=(a-l)/v,l=m/v,m=0),i=new b([[g,-d],[d,g]],[[l,m],[m,-l]]),T.setRows(r,o,i.dot(T.getRows(r,o))))}var j=T.dot(e).dot(T.transjugate()),S=e.length,_=numeric.T.identity(S);for(o=0;S>o;o++)if(o>0)for(n=o-1;n>=0;n--){var I=j.get([n,n]),$=j.get([o,o]);numeric.neq(I.x,$.x)||numeric.neq(I.y,$.y)?(l=j.getRow(n).getBlock([n],[o-1]),m=_.getRow(o).getBlock([n],[o-1]),_.set([o,n],j.get([n,o]).neg().sub(l.dot(m)).div(I.sub($)))):_.setRow(o,_.getRow(n))}for(o=0;S>o;o++)l=_.getRow(o),_.setRow(o,l.div(l.norm2()));return _=_.transpose(),_=T.transjugate().dot(_),{lambda:j.getDiag(),E:_}},numeric.ccsSparse=function(e){var t,r,n,i,o=e.length,s=[];for(n=o-1;-1!==n;--n){r=e[n];for(i in r){for(i=parseInt(i);i>=s.length;)s[s.length]=0;0!==r[i]&&s[i]++}}var t=s.length,u=Array(t+1);for(u[0]=0,n=0;t>n;++n)u[n+1]=u[n]+s[n];var c=Array(u[t]),a=Array(u[t]);for(n=o-1;-1!==n;--n){r=e[n];for(i in r)0!==r[i]&&(s[i]--,c[u[i]+s[i]]=n,a[u[i]+s[i]]=r[i])}return[u,c,a]},numeric.ccsFull=function(e){var t,r,n,i,o=e[0],s=e[1],u=e[2],c=numeric.ccsDim(e),a=c[0],f=c[1],h=numeric.rep([a,f],0);for(t=0;f>t;t++)for(n=o[t],i=o[t+1],r=n;i>r;++r)h[s[r]][t]=u[r];return h},numeric.ccsTSolve=function(e,t,r,n,i){function o(e){var t;if(0===r[e]){for(r[e]=1,t=s[e];t<s[e+1];++t)o(u[t]);i[h]=e,++h}}var s=e[0],u=e[1],c=e[2],a=s.length-1,f=Math.max,h=0;"undefined"==typeof n&&(r=numeric.rep([a],0)),"undefined"==typeof n&&(n=numeric.linspace(0,r.length-1)),"undefined"==typeof i&&(i=[]);var p,l,m,d,g,y,v;for(p=n.length-1;-1!==p;--p)o(n[p]);for(i.length=h,p=i.length-1;-1!==p;--p)r[i[p]]=0;for(p=n.length-1;-1!==p;--p)l=n[p],r[l]=t[l];for(p=i.length-1;-1!==p;--p){for(l=i[p],m=s[l],d=f(s[l+1],m),g=m;g!==d;++g)if(u[g]===l){r[l]/=c[g];break}for(v=r[l],g=m;g!==d;++g)y=u[g],y!==l&&(r[y]-=v*c[g])}return r},numeric.ccsDFS=function(e){this.k=Array(e),this.k1=Array(e),this.j=Array(e)},numeric.ccsDFS.prototype.dfs=function(e,t,r,n,i,o){var s,u,c,a=0,f=i.length,h=this.k,p=this.k1,l=this.j;if(0===n[e])for(n[e]=1,l[0]=e,h[0]=u=t[e],p[0]=c=t[e+1];;)if(u>=c){if(i[f]=l[a],0===a)return;++f,--a,u=h[a],c=p[a]}else s=o[r[u]],0===n[s]?(n[s]=1,h[a]=u,++a,l[a]=s,u=t[s],p[a]=c=t[s+1]):++u},numeric.ccsLPSolve=function(e,t,r,n,i,o,s){var u,c,a,f,h,p,l,m,d,g=e[0],y=e[1],v=e[2],x=(g.length-1,t[0]),w=t[1],b=t[2];for(c=x[i],a=x[i+1],n.length=0,u=c;a>u;++u)s.dfs(o[w[u]],g,y,r,n,o);for(u=n.length-1;-1!==u;--u)r[n[u]]=0;for(u=c;u!==a;++u)f=o[w[u]],r[f]=b[u];for(u=n.length-1;-1!==u;--u){for(f=n[u],h=g[f],p=g[f+1],l=h;p>l;++l)if(o[y[l]]===f){r[f]/=v[l];break}for(d=r[f],l=h;p>l;++l)m=o[y[l]],m!==f&&(r[m]-=d*v[l])}return r},numeric.ccsLUP1=function(e,t){var r,n,i,o,s,u,c,a=e[0].length-1,f=[numeric.rep([a+1],0),[],[]],h=[numeric.rep([a+1],0),[],[]],p=f[0],l=f[1],m=f[2],d=h[0],g=h[1],y=h[2],v=numeric.rep([a],0),x=numeric.rep([a],0),w=numeric.ccsLPSolve,b=(Math.max,Math.abs),S=numeric.linspace(0,a-1),P=numeric.linspace(0,a-1),k=new numeric.ccsDFS(a);for("undefined"==typeof t&&(t=1),r=0;a>r;++r){for(w(f,e,v,x,r,P,k),o=-1,s=-1,n=x.length-1;-1!==n;--n)i=x[n],r>=i||(u=b(v[i]),u>o&&(s=i,o=u));for(b(v[r])<t*o&&(n=S[r],o=S[s],S[r]=o,P[o]=r,S[s]=n,P[n]=s,o=v[r],v[r]=v[s],v[s]=o),o=p[r],s=d[r],c=v[r],l[o]=S[r],m[o]=1,++o,n=x.length-1;-1!==n;--n)i=x[n],u=v[i],x[n]=0,v[i]=0,r>=i?(g[s]=i,y[s]=u,++s):(l[o]=S[i],m[o]=u/c,++o);p[r+1]=o,d[r+1]=s}for(n=l.length-1;-1!==n;--n)l[n]=P[l[n]];return{L:f,U:h,P:S,Pinv:P}},numeric.ccsDFS0=function(e){this.k=Array(e),this.k1=Array(e),this.j=Array(e)},numeric.ccsDFS0.prototype.dfs=function(e,t,r,n,i,o){var s,u,c,a=0,f=i.length,h=this.k,p=this.k1,l=this.j;if(0===n[e])for(n[e]=1,l[0]=e,h[0]=u=t[o[e]],p[0]=c=t[o[e]+1];;){if(isNaN(u))throw new Error("Ow!");if(u>=c){if(i[f]=o[l[a]],0===a)return;++f,--a,u=h[a],c=p[a]}else s=r[u],0===n[s]?(n[s]=1,h[a]=u,++a,l[a]=s,s=o[s],u=t[s],p[a]=c=t[s+1]):++u}},numeric.ccsLPSolve0=function(e,t,r,n,i,o,s,u){var c,a,f,h,p,l,m,d,g,y=e[0],v=e[1],x=e[2],w=(y.length-1,t[0]),b=t[1],S=t[2];for(a=w[i],f=w[i+1],n.length=0,c=a;f>c;++c)u.dfs(b[c],y,v,r,n,o,s);for(c=n.length-1;-1!==c;--c)h=n[c],r[s[h]]=0;for(c=a;c!==f;++c)h=b[c],r[h]=S[c];for(c=n.length-1;-1!==c;--c){for(h=n[c],d=s[h],p=y[h],l=y[h+1],m=p;l>m;++m)if(v[m]===d){r[d]/=x[m];break}for(g=r[d],m=p;l>m;++m)r[v[m]]-=g*x[m];r[d]=g}},numeric.ccsLUP0=function(e,t){var r,n,i,o,s,u,c,a=e[0].length-1,f=[numeric.rep([a+1],0),[],[]],h=[numeric.rep([a+1],0),[],[]],p=f[0],l=f[1],m=f[2],d=h[0],g=h[1],y=h[2],v=numeric.rep([a],0),x=numeric.rep([a],0),w=numeric.ccsLPSolve0,b=(Math.max,Math.abs),S=numeric.linspace(0,a-1),P=numeric.linspace(0,a-1),k=new numeric.ccsDFS0(a);for("undefined"==typeof t&&(t=1),r=0;a>r;++r){for(w(f,e,v,x,r,P,S,k),o=-1,s=-1,n=x.length-1;-1!==n;--n)i=x[n],r>=i||(u=b(v[S[i]]),u>o&&(s=i,o=u));for(b(v[S[r]])<t*o&&(n=S[r],o=S[s],S[r]=o,P[o]=r,S[s]=n,P[n]=s),o=p[r],s=d[r],c=v[S[r]],l[o]=S[r],m[o]=1,++o,n=x.length-1;-1!==n;--n)i=x[n],u=v[S[i]],x[n]=0,v[S[i]]=0,r>=i?(g[s]=i,y[s]=u,++s):(l[o]=S[i],m[o]=u/c,++o);p[r+1]=o,d[r+1]=s}for(n=l.length-1;-1!==n;--n)l[n]=P[l[n]];return{L:f,U:h,P:S,Pinv:P}},numeric.ccsLUP=numeric.ccsLUP0,numeric.ccsDim=function(e){return[numeric.sup(e[1])+1,e[0].length-1]},numeric.ccsGetBlock=function(e,t,r){var n=numeric.ccsDim(e),i=n[0],o=n[1];"undefined"==typeof t?t=numeric.linspace(0,i-1):"number"==typeof t&&(t=[t]),"undefined"==typeof r?r=numeric.linspace(0,o-1):"number"==typeof r&&(r=[r]);var s,u,c,a,f,h=t.length,p=r.length,l=numeric.rep([o],0),m=[],d=[],g=[l,m,d],y=e[0],v=e[1],x=e[2],w=numeric.rep([i],0),b=0,S=numeric.rep([i],0);for(u=0;p>u;++u){a=r[u];var P=y[a],k=y[a+1];for(s=P;k>s;++s)c=v[s],S[c]=1,w[c]=x[s];for(s=0;h>s;++s)f=t[s],S[f]&&(m[b]=s,d[b]=w[t[s]],++b);for(s=P;k>s;++s)c=v[s],S[c]=0;l[u+1]=b}return g},numeric.ccsDot=function(e,t){var r,n,i,o,s,u,c,a,f,h,p,l=e[0],m=e[1],d=e[2],g=t[0],y=t[1],v=t[2],x=numeric.ccsDim(e),w=numeric.ccsDim(t),b=x[0],S=(x[1],w[1]),P=numeric.rep([b],0),k=numeric.rep([b],0),T=Array(b),M=numeric.rep([S],0),A=[],j=[],_=[M,A,j];for(i=0;i!==S;++i){for(o=g[i],s=g[i+1],f=0,n=o;s>n;++n)for(h=y[n],p=v[n],u=l[h],c=l[h+1],r=u;c>r;++r)a=m[r],0===k[a]&&(T[f]=a,k[a]=1,f+=1),P[a]=P[a]+d[r]*p;for(o=M[i],s=o+f,M[i+1]=s,n=f-1;-1!==n;--n)p=o+n,r=T[n],A[p]=r,j[p]=P[r],k[r]=0,P[r]=0;M[i+1]=M[i]+f}return _},numeric.ccsLUPSolve=function(e,t){var r=e.L,n=e.U,i=(e.P,t[0]),o=!1;"object"!=typeof i&&(t=[[0,t.length],numeric.linspace(0,t.length-1),t],i=t[0],o=!0);var s,u,c,a,f,h,p=t[1],l=t[2],m=r[0].length-1,d=i.length-1,g=numeric.rep([m],0),y=Array(m),v=numeric.rep([m],0),x=Array(m),w=numeric.rep([d+1],0),b=[],S=[],P=numeric.ccsTSolve,k=0;for(s=0;d>s;++s){for(f=0,c=i[s],a=i[s+1],u=c;a>u;++u)h=e.Pinv[p[u]],x[f]=h,v[h]=l[u],++f;for(x.length=f,P(r,v,g,x,y),u=x.length-1;-1!==u;--u)v[x[u]]=0;if(P(n,g,v,y,x),o)return v;for(u=y.length-1;-1!==u;--u)g[y[u]]=0;for(u=x.length-1;-1!==u;--u)h=x[u],b[k]=h,S[k]=v[h],v[h]=0,++k;w[s+1]=k}return[w,b,S]},numeric.ccsbinop=function(e,t){return"undefined"==typeof t&&(t=""),Function("X","Y","var Xi = X[0], Xj = X[1], Xv = X[2];\nvar Yi = Y[0], Yj = Y[1], Yv = Y[2];\nvar n = Xi.length-1,m = Math.max(numeric.sup(Xj),numeric.sup(Yj))+1;\nvar Zi = numeric.rep([n+1],0), Zj = [], Zv = [];\nvar x = numeric.rep([m],0),y = numeric.rep([m],0);\nvar xk,yk,zk;\nvar i,j,j0,j1,k,p=0;\n"+t+"for(i=0;i<n;++i) {\n  j0 = Xi[i]; j1 = Xi[i+1];\n  for(j=j0;j!==j1;++j) {\n    k = Xj[j];\n    x[k] = 1;\n    Zj[p] = k;\n    ++p;\n  }\n  j0 = Yi[i]; j1 = Yi[i+1];\n  for(j=j0;j!==j1;++j) {\n    k = Yj[j];\n    y[k] = Yv[j];\n    if(x[k] === 0) {\n      Zj[p] = k;\n      ++p;\n    }\n  }\n  Zi[i+1] = p;\n  j0 = Xi[i]; j1 = Xi[i+1];\n  for(j=j0;j!==j1;++j) x[Xj[j]] = Xv[j];\n  j0 = Zi[i]; j1 = Zi[i+1];\n  for(j=j0;j!==j1;++j) {\n    k = Zj[j];\n    xk = x[k];\n    yk = y[k];\n"+e+"\n    Zv[j] = zk;\n  }\n  j0 = Xi[i]; j1 = Xi[i+1];\n  for(j=j0;j!==j1;++j) x[Xj[j]] = 0;\n  j0 = Yi[i]; j1 = Yi[i+1];\n  for(j=j0;j!==j1;++j) y[Yj[j]] = 0;\n}\nreturn [Zi,Zj,Zv];")},function(){var k,A,B,C;for(k in numeric.ops2)A=isFinite(eval("1"+numeric.ops2[k]+"0"))?"[Y[0],Y[1],numeric."+k+"(X,Y[2])]":"NaN",B=isFinite(eval("0"+numeric.ops2[k]+"1"))?"[X[0],X[1],numeric."+k+"(X[2],Y)]":"NaN",C=isFinite(eval("1"+numeric.ops2[k]+"0"))&&isFinite(eval("0"+numeric.ops2[k]+"1"))?"numeric.ccs"+k+"MM(X,Y)":"NaN",numeric["ccs"+k+"MM"]=numeric.ccsbinop("zk = xk "+numeric.ops2[k]+"yk;"),numeric["ccs"+k]=Function("X","Y",'if(typeof X === "number") return '+A+';\nif(typeof Y === "number") return '+B+";\nreturn "+C+";\n")}(),numeric.ccsScatter=function(e){var t,r=e[0],n=e[1],i=e[2],o=numeric.sup(n)+1,s=r.length,u=numeric.rep([o],0),c=Array(s),a=Array(s),f=numeric.rep([o],0);for(t=0;s>t;++t)f[n[t]]++;for(t=0;o>t;++t)u[t+1]=u[t]+f[t];var h,p,l=u.slice(0);for(t=0;s>t;++t)p=n[t],h=l[p],c[h]=r[t],a[h]=i[t],l[p]=l[p]+1;return[u,c,a]},numeric.ccsGather=function(e){var t,r,n,i,o,s=e[0],u=e[1],c=e[2],a=s.length-1,f=u.length,h=Array(f),p=Array(f),l=Array(f);for(o=0,t=0;a>t;++t)for(n=s[t],i=s[t+1],r=n;r!==i;++r)p[o]=t,h[o]=u[r],l[o]=c[r],++o;return[h,p,l]},numeric.sdim=function c(e,t,r){if("undefined"==typeof t&&(t=[]),"object"!=typeof e)return t;"undefined"==typeof r&&(r=0),r in t||(t[r]=0),e.length>t[r]&&(t[r]=e.length);var n;for(n in e)e.hasOwnProperty(n)&&c(e[n],t,r+1);return t},numeric.sclone=function a(e,t,r){"undefined"==typeof t&&(t=0),"undefined"==typeof r&&(r=numeric.sdim(e).length);var n,i=Array(e.length);if(t===r-1){for(n in e)e.hasOwnProperty(n)&&(i[n]=e[n]);return i}for(n in e)e.hasOwnProperty(n)&&(i[n]=a(e[n],t+1,r));return i},numeric.sdiag=function(e){var t,r,n=e.length,i=Array(n);for(t=n-1;t>=1;t-=2)r=t-1,i[t]=[],i[t][t]=e[t],i[r]=[],i[r][r]=e[r];return 0===t&&(i[0]=[],i[0][0]=e[t]),i},numeric.sidentity=function(e){return numeric.sdiag(numeric.rep([e],1))},numeric.stranspose=function(e){{var t,r,n,i=[];e.length}for(t in e)if(e.hasOwnProperty(t)){n=e[t];for(r in n)n.hasOwnProperty(r)&&("object"!=typeof i[r]&&(i[r]=[]),i[r][t]=n[r])}return i},numeric.sLUP=function(){throw new Error("The function numeric.sLUP had a bug in it and has been removed. Please use the new numeric.ccsLUP function instead.")},numeric.sdotMM=function(e,t){var r,n,i,o,s,u,c,a=e.length,f=(t.length,numeric.stranspose(t)),h=f.length,p=Array(a);for(i=a-1;i>=0;i--){for(c=[],r=e[i],s=h-1;s>=0;s--){u=0,n=f[s];for(o in r)r.hasOwnProperty(o)&&o in n&&(u+=r[o]*n[o]);u&&(c[s]=u)}p[i]=c}return p},numeric.sdotMV=function(e,t){var r,n,i,o,s=e.length,u=Array(s);for(n=s-1;n>=0;n--){r=e[n],o=0;for(i in r)r.hasOwnProperty(i)&&t[i]&&(o+=r[i]*t[i]);o&&(u[n]=o)}return u},numeric.sdotVM=function(e,t){var r,n,i,o,s=[];for(r in e)if(e.hasOwnProperty(r)){i=t[r],o=e[r];for(n in i)i.hasOwnProperty(n)&&(s[n]||(s[n]=0),s[n]+=o*i[n])}return s},numeric.sdotVV=function(e,t){var r,n=0;for(r in e)e[r]&&t[r]&&(n+=e[r]*t[r]);return n},numeric.sdot=function(e,t){var r=numeric.sdim(e).length,n=numeric.sdim(t).length,i=1e3*r+n;switch(i){case 0:return e*t;case 1001:return numeric.sdotVV(e,t);case 2001:return numeric.sdotMV(e,t);case 1002:return numeric.sdotVM(e,t);case 2002:return numeric.sdotMM(e,t);default:throw new Error("numeric.sdot not implemented for tensors of order "+r+" and "+n)}},numeric.sscatter=function(e){var t,r,n,i,o=e[0].length,s=e.length,u=[];for(r=o-1;r>=0;--r)if(e[s-1][r]){for(i=u,n=0;s-2>n;n++)t=e[n][r],i[t]||(i[t]=[]),i=i[t];i[e[n][r]]=e[n+1][r]}return u},numeric.sgather=function f(e,t,r){"undefined"==typeof t&&(t=[]),"undefined"==typeof r&&(r=[]);var n,i,o;n=r.length;for(i in e)if(e.hasOwnProperty(i))if(r[n]=parseInt(i),o=e[i],"number"==typeof o){if(o){if(0===t.length)for(i=n+1;i>=0;--i)t[i]=[];for(i=n;i>=0;--i)t[i].push(r[i]);t[n+1].push(o)}}else f(o,t,r);return r.length>n&&r.pop(),t},numeric.cLU=function(e){var t,r,n,i,o,s,u=e[0],c=e[1],a=e[2],f=u.length,h=0;
for(t=0;f>t;t++)u[t]>h&&(h=u[t]);h++;var p,l,m,d=Array(h),g=Array(h),y=numeric.rep([h],1/0),v=numeric.rep([h],-1/0);for(n=0;f>n;n++)t=u[n],r=c[n],r<y[t]&&(y[t]=r),r>v[t]&&(v[t]=r);for(t=0;h-1>t;t++)v[t]>v[t+1]&&(v[t+1]=v[t]);for(t=h-1;t>=1;t--)y[t]<y[t-1]&&(y[t-1]=y[t]);var x=0,w=0;for(t=0;h>t;t++)g[t]=numeric.rep([v[t]-y[t]+1],0),d[t]=numeric.rep([t-y[t]],0),x+=t-y[t]+1,w+=v[t]-t+1;for(n=0;f>n;n++)t=u[n],g[t][c[n]-y[t]]=a[n];for(t=0;h-1>t;t++)for(i=t-y[t],p=g[t],r=t+1;y[r]<=t&&h>r;r++)if(o=t-y[r],s=v[t]-t,l=g[r],m=l[o]/p[i]){for(n=1;s>=n;n++)l[n+o]-=m*p[n+i];d[r][t-y[r]]=m}var f,b,S,p=[],l=[],P=[],k=[],T=[],M=[];for(f=0,b=0,t=0;h>t;t++){for(i=y[t],o=v[t],S=g[t],r=t;o>=r;r++)S[r-i]&&(p[f]=t,l[f]=r,P[f]=S[r-i],f++);for(S=d[t],r=i;t>r;r++)S[r-i]&&(k[b]=t,T[b]=r,M[b]=S[r-i],b++);k[b]=t,T[b]=t,M[b]=1,b++}return{U:[p,l,P],L:[k,T,M]}},numeric.cLUsolve=function(e,t){var r,n,i=e.L,o=e.U,s=numeric.clone(t),u=i[0],c=i[1],a=i[2],f=o[0],h=o[1],p=o[2],l=f.length,m=(u.length,s.length);for(n=0,r=0;m>r;r++){for(;c[n]<r;)s[r]-=a[n]*s[c[n]],n++;n++}for(n=l-1,r=m-1;r>=0;r--){for(;h[n]>r;)s[r]-=p[n]*s[h[n]],n--;s[r]/=p[n],n--}return s},numeric.cgrid=function(e,t){"number"==typeof e&&(e=[e,e]);var r,n,i,o=numeric.rep(e,-1);if("function"!=typeof t)switch(t){case"L":t=function(t,r){return t>=e[0]/2||r<e[1]/2};break;default:t=function(){return!0}}for(i=0,r=1;r<e[0]-1;r++)for(n=1;n<e[1]-1;n++)t(r,n)&&(o[r][n]=i,i++);return o},numeric.cdelsq=function(e){var t,r,n,i,o,s=[[-1,0],[0,-1],[0,1],[1,0]],u=numeric.dim(e),c=u[0],a=u[1],f=[],h=[],p=[];for(t=1;c-1>t;t++)for(r=1;a-1>r;r++)if(!(e[t][r]<0)){for(n=0;4>n;n++)i=t+s[n][0],o=r+s[n][1],e[i][o]<0||(f.push(e[t][r]),h.push(e[i][o]),p.push(-1));f.push(e[t][r]),h.push(e[t][r]),p.push(4)}return[f,h,p]},numeric.cdotMV=function(e,t){var r,n,i,o=e[0],s=e[1],u=e[2],c=o.length;for(i=0,n=0;c>n;n++)o[n]>i&&(i=o[n]);for(i++,r=numeric.rep([i],0),n=0;c>n;n++)r[o[n]]+=u[n]*t[s[n]];return r},numeric.Spline=function(e,t,r,n,i){this.x=e,this.yl=t,this.yr=r,this.kl=n,this.kr=i},numeric.Spline.prototype._at=function(e,t){var e,r,n,i,o=this.x,s=this.yl,u=this.yr,c=this.kl,a=this.kr,f=numeric.add,h=numeric.sub,p=numeric.mul;r=h(p(c[t],o[t+1]-o[t]),h(u[t+1],s[t])),n=f(p(a[t+1],o[t]-o[t+1]),h(u[t+1],s[t])),i=(e-o[t])/(o[t+1]-o[t]);var l=i*(1-i);return f(f(f(p(1-i,s[t]),p(i,u[t+1])),p(r,l*(1-i))),p(n,l*i))},numeric.Spline.prototype.at=function(e){if("number"==typeof e){var t,r,n,i=this.x,o=i.length,s=Math.floor;for(t=0,r=o-1;r-t>1;)n=s((t+r)/2),i[n]<=e?t=n:r=n;return this._at(e,t)}var u,o=e.length,c=Array(o);for(u=o-1;-1!==u;--u)c[u]=this.at(e[u]);return c},numeric.Spline.prototype.diff=function(){var e,t,r,n=this.x,i=this.yl,o=this.yr,s=this.kl,u=this.kr,c=i.length,a=s,f=u,h=Array(c),p=Array(c),l=numeric.add,m=numeric.mul,d=numeric.div,g=numeric.sub;for(e=c-1;-1!==e;--e)t=n[e+1]-n[e],r=g(o[e+1],i[e]),h[e]=d(l(m(r,6),m(s[e],-4*t),m(u[e+1],-2*t)),t*t),p[e+1]=d(l(m(r,-6),m(s[e],2*t),m(u[e+1],4*t)),t*t);return new numeric.Spline(n,a,f,h,p)},numeric.Spline.prototype.roots=function(){function e(e){return e*e}var t=[],r=this.x,n=this.yl,i=this.yr,o=this.kl,s=this.kr;"number"==typeof n[0]&&(n=[n],i=[i],o=[o],s=[s]);var u,c,a,f,h,p,l,m,d,g,y,v,x,w,b,S,P,k,T,M,A,j,_,I,$=n.length,L=r.length-1,t=Array($),E=Math.sqrt;for(u=0;u!==$;++u){for(f=n[u],h=i[u],p=o[u],l=s[u],m=[],c=0;c!==L;c++){for(c>0&&h[c]*f[c]<0&&m.push(r[c]),S=r[c+1]-r[c],P=r[c],y=f[c],v=h[c+1],d=p[c]/S,g=l[c+1]/S,b=e(d-g+3*(y-v))+12*g*y,x=g+3*y+2*d-3*v,w=3*(g+d+2*(y-v)),0>=b?(T=x/w,k=T>r[c]&&T<r[c+1]?[r[c],T,r[c+1]]:[r[c],r[c+1]]):(T=(x-E(b))/w,M=(x+E(b))/w,k=[r[c]],T>r[c]&&T<r[c+1]&&k.push(T),M>r[c]&&M<r[c+1]&&k.push(M),k.push(r[c+1])),j=k[0],T=this._at(j,c),a=0;a<k.length-1;a++)if(_=k[a+1],M=this._at(_,c),0!==T)if(0===M||T*M>0)j=_,T=M;else{for(var U=0;;){if(I=(T*_-M*j)/(T-M),j>=I||I>=_)break;if(A=this._at(I,c),A*M>0)_=I,M=A,-1===U&&(T*=.5),U=-1;else{if(!(A*T>0))break;j=I,T=A,1===U&&(M*=.5),U=1}}m.push(I),j=k[a+1],T=this._at(j,c)}else m.push(j),j=_,T=M;0===M&&m.push(_)}t[u]=m}return"number"==typeof this.yl[0]?t[0]:t},numeric.spline=function(e,t,r,n){var i,o=e.length,s=[],u=[],c=[],a=numeric.sub,f=numeric.mul,h=numeric.add;for(i=o-2;i>=0;i--)u[i]=e[i+1]-e[i],c[i]=a(t[i+1],t[i]);("string"==typeof r||"string"==typeof n)&&(r=n="periodic");var p=[[],[],[]];switch(typeof r){case"undefined":s[0]=f(3/(u[0]*u[0]),c[0]),p[0].push(0,0),p[1].push(0,1),p[2].push(2/u[0],1/u[0]);break;case"string":s[0]=h(f(3/(u[o-2]*u[o-2]),c[o-2]),f(3/(u[0]*u[0]),c[0])),p[0].push(0,0,0),p[1].push(o-2,0,1),p[2].push(1/u[o-2],2/u[o-2]+2/u[0],1/u[0]);break;default:s[0]=r,p[0].push(0),p[1].push(0),p[2].push(1)}for(i=1;o-1>i;i++)s[i]=h(f(3/(u[i-1]*u[i-1]),c[i-1]),f(3/(u[i]*u[i]),c[i])),p[0].push(i,i,i),p[1].push(i-1,i,i+1),p[2].push(1/u[i-1],2/u[i-1]+2/u[i],1/u[i]);switch(typeof n){case"undefined":s[o-1]=f(3/(u[o-2]*u[o-2]),c[o-2]),p[0].push(o-1,o-1),p[1].push(o-2,o-1),p[2].push(1/u[o-2],2/u[o-2]);break;case"string":p[1][p[1].length-1]=0;break;default:s[o-1]=n,p[0].push(o-1),p[1].push(o-1),p[2].push(1)}s="number"!=typeof s[0]?numeric.transpose(s):[s];var l=Array(s.length);if("string"==typeof r)for(i=l.length-1;-1!==i;--i)l[i]=numeric.ccsLUPSolve(numeric.ccsLUP(numeric.ccsScatter(p)),s[i]),l[i][o-1]=l[i][0];else for(i=l.length-1;-1!==i;--i)l[i]=numeric.cLUsolve(numeric.cLU(p),s[i]);return l="number"==typeof t[0]?l[0]:numeric.transpose(l),new numeric.Spline(e,t,t,l,l)},numeric.fftpow2=function h(e,t){var r=e.length;if(1!==r){var n,i,o=Math.cos,s=Math.sin,u=Array(r/2),c=Array(r/2),a=Array(r/2),f=Array(r/2);for(i=r/2,n=r-1;-1!==n;--n)--i,a[i]=e[n],f[i]=t[n],--n,u[i]=e[n],c[i]=t[n];h(u,c),h(a,f),i=r/2;var p,l,m,d=-6.283185307179586/r;for(n=r-1;-1!==n;--n)--i,-1===i&&(i=r/2-1),p=d*n,l=o(p),m=s(p),e[n]=u[i]+l*a[i]-m*f[i],t[n]=c[i]+l*f[i]+m*a[i]}},numeric._ifftpow2=function p(e,t){var r=e.length;if(1!==r){var n,i,o=Math.cos,s=Math.sin,u=Array(r/2),c=Array(r/2),a=Array(r/2),f=Array(r/2);for(i=r/2,n=r-1;-1!==n;--n)--i,a[i]=e[n],f[i]=t[n],--n,u[i]=e[n],c[i]=t[n];p(u,c),p(a,f),i=r/2;var h,l,m,d=6.283185307179586/r;for(n=r-1;-1!==n;--n)--i,-1===i&&(i=r/2-1),h=d*n,l=o(h),m=s(h),e[n]=u[i]+l*a[i]-m*f[i],t[n]=c[i]+l*f[i]+m*a[i]}},numeric.ifftpow2=function(e,t){numeric._ifftpow2(e,t),numeric.diveq(e,e.length),numeric.diveq(t,t.length)},numeric.convpow2=function(e,t,r,n){numeric.fftpow2(e,t),numeric.fftpow2(r,n);var i,o,s,u,c,a=e.length;for(i=a-1;-1!==i;--i)o=e[i],u=t[i],s=r[i],c=n[i],e[i]=o*s-u*c,t[i]=o*c+u*s;numeric.ifftpow2(e,t)},numeric.T.prototype.fft=function(){{var e,t,r=this.x,n=this.y,i=r.length,o=Math.log,s=o(2),u=Math.ceil(o(2*i-1)/s),c=Math.pow(2,u),a=numeric.rep([c],0),f=numeric.rep([c],0),h=Math.cos,p=Math.sin,l=-3.141592653589793/i,m=numeric.rep([c],0),d=numeric.rep([c],0);Math.floor(i/2)}for(e=0;i>e;e++)m[e]=r[e];if("undefined"!=typeof n)for(e=0;i>e;e++)d[e]=n[e];for(a[0]=1,e=1;c/2>=e;e++)t=l*e*e,a[e]=h(t),f[e]=p(t),a[c-e]=h(t),f[c-e]=p(t);var g=new numeric.T(m,d),y=new numeric.T(a,f);return g=g.mul(y),numeric.convpow2(g.x,g.y,numeric.clone(y.x),numeric.neg(y.y)),g=g.mul(y),g.x.length=i,g.y.length=i,g},numeric.T.prototype.ifft=function(){{var e,t,r=this.x,n=this.y,i=r.length,o=Math.log,s=o(2),u=Math.ceil(o(2*i-1)/s),c=Math.pow(2,u),a=numeric.rep([c],0),f=numeric.rep([c],0),h=Math.cos,p=Math.sin,l=3.141592653589793/i,m=numeric.rep([c],0),d=numeric.rep([c],0);Math.floor(i/2)}for(e=0;i>e;e++)m[e]=r[e];if("undefined"!=typeof n)for(e=0;i>e;e++)d[e]=n[e];for(a[0]=1,e=1;c/2>=e;e++)t=l*e*e,a[e]=h(t),f[e]=p(t),a[c-e]=h(t),f[c-e]=p(t);var g=new numeric.T(m,d),y=new numeric.T(a,f);return g=g.mul(y),numeric.convpow2(g.x,g.y,numeric.clone(y.x),numeric.neg(y.y)),g=g.mul(y),g.x.length=i,g.y.length=i,g.div(i)},numeric.gradient=function(e,t){var r=t.length,n=e(t);if(isNaN(n))throw new Error("gradient: f(x) is a NaN!");var i,o,s,u,c,a,f,h,p,l,m=Math.max,d=numeric.clone(t),g=Array(r),m=(numeric.div,numeric.sub,Math.max),y=.001,v=Math.abs,x=Math.min,w=0;for(i=0;r>i;i++)for(var b=m(1e-6*n,1e-8);;){if(++w,w>20)throw new Error("Numerical gradient fails");if(d[i]=t[i]+b,o=e(d),d[i]=t[i]-b,s=e(d),d[i]=t[i],isNaN(o)||isNaN(s))b/=16;else{if(g[i]=(o-s)/(2*b),c=t[i]-b,a=t[i],f=t[i]+b,h=(o-n)/b,p=(n-s)/b,l=m(v(g[i]),v(n),v(o),v(s),v(c),v(a),v(f),1e-8),u=x(m(v(h-g[i]),v(p-g[i]),v(h-p))/l,b/l),!(u>y))break;b/=16}}return g},numeric.uncmin=function(e,t,r,n,i,o,s){var u=numeric.gradient;"undefined"==typeof s&&(s={}),"undefined"==typeof r&&(r=1e-8),"undefined"==typeof n&&(n=function(t){return u(e,t)}),"undefined"==typeof i&&(i=1e3),t=numeric.clone(t);var c,a,f=t.length,h=e(t);if(isNaN(h))throw new Error("uncmin: f(x0) is a NaN!");var p=Math.max,l=numeric.norm2;r=p(r,numeric.epsilon);var m,d,g,y,v,x,w,b,S,P,k=s.Hinv||numeric.identity(f),T=numeric.dot,M=(numeric.inv,numeric.sub),A=numeric.add,j=numeric.tensor,_=numeric.div,I=numeric.mul,$=numeric.all,L=numeric.isFinite,E=numeric.neg,U=0,q="";for(d=n(t);i>U;){if("function"==typeof o&&o(U,t,h,d,k)){q="Callback returned true";break}if(!$(L(d))){q="Gradient has Infinity or NaN";break}if(m=E(T(k,d)),!$(L(m))){q="Search direction has Infinity or NaN";break}if(P=l(m),r>P){q="Newton step smaller than tol";break}for(S=1,a=T(d,m),v=t;i>U&&!(r>S*P)&&(y=I(m,S),v=A(t,y),c=e(v),c-h>=.1*S*a||isNaN(c));)S*=.5,++U;if(r>S*P){q="Line search step size smaller than tol";break}if(U===i){q="maxit reached during line search";break}g=n(v),x=M(g,d),b=T(x,y),w=T(k,x),k=M(A(k,I((b+T(x,w))/(b*b),j(y,y))),_(A(j(w,y),j(y,w)),b)),t=v,h=c,d=g,++U}return{solution:t,f:h,gradient:d,invHessian:k,iterations:U,message:q}},numeric.Dopri=function(e,t,r,n,i,o,s){this.x=e,this.y=t,this.f=r,this.ymid=n,this.iterations=i,this.events=s,this.message=o},numeric.Dopri.prototype._at=function(e,t){function r(e){return e*e}var n,i,o,s,u,c,e,a,f,h,p,l=this,m=l.x,d=l.y,g=l.f,y=l.ymid,v=(m.length,Math.floor,.5),x=numeric.add,w=numeric.mul,b=numeric.sub;return n=m[t],i=m[t+1],s=d[t],u=d[t+1],a=i-n,o=n+v*a,c=y[t],f=b(g[t],w(s,1/(n-o)+2/(n-i))),h=b(g[t+1],w(u,1/(i-o)+2/(i-n))),p=[r(e-i)*(e-o)/r(n-i)/(n-o),r(e-n)*r(e-i)/r(n-o)/r(i-o),r(e-n)*(e-o)/r(i-n)/(i-o),(e-n)*r(e-i)*(e-o)/r(n-i)/(n-o),(e-i)*r(e-n)*(e-o)/r(n-i)/(i-o)],x(x(x(x(w(s,p[0]),w(c,p[1])),w(u,p[2])),w(f,p[3])),w(h,p[4]))},numeric.Dopri.prototype.at=function(e){var t,r,n,i=Math.floor;if("number"!=typeof e){var o=e.length,s=Array(o);for(t=o-1;-1!==t;--t)s[t]=this.at(e[t]);return s}var u=this.x;for(t=0,r=u.length-1;r-t>1;)n=i(.5*(t+r)),u[n]<=e?t=n:r=n;return this._at(e,t)},numeric.dopri=function(e,t,r,n,i,o,s){"undefined"==typeof i&&(i=1e-6),"undefined"==typeof o&&(o=1e3);var u,c,a,f,h,p,l,m,d,g,y,v,x,w=[e],b=[r],S=[n(e,r)],P=[],k=.2,T=[.075,.225],M=[44/45,-56/15,32/9],A=[19372/6561,-25360/2187,64448/6561,-212/729],j=[9017/3168,-355/33,46732/5247,49/176,-5103/18656],_=[35/384,0,500/1113,125/192,-2187/6784,11/84],I=[.10013431883002395,0,.3918321794184259,-0.02982460176594817,.05893268337240795,-0.04497888809104361,.023904308236133973],$=[.2,.3,.8,8/9,1,1],L=[-71/57600,0,71/16695,-71/1920,17253/339200,-22/525,.025],E=0,U=(t-e)/10,q=0,V=numeric.add,R=numeric.mul,O=(Math.max,Math.min),C=Math.abs,F=numeric.norminf,D=Math.pow,N=numeric.any,B=numeric.lt,X=numeric.and,Y=(numeric.sub,new numeric.Dopri(w,b,S,P,-1,""));for("function"==typeof s&&(y=s(e,r));t>e&&o>q;)if(++q,e+U>t&&(U=t-e),u=n(e+$[0]*U,V(r,R(k*U,S[E]))),c=n(e+$[1]*U,V(V(r,R(T[0]*U,S[E])),R(T[1]*U,u))),a=n(e+$[2]*U,V(V(V(r,R(M[0]*U,S[E])),R(M[1]*U,u)),R(M[2]*U,c))),f=n(e+$[3]*U,V(V(V(V(r,R(A[0]*U,S[E])),R(A[1]*U,u)),R(A[2]*U,c)),R(A[3]*U,a))),h=n(e+$[4]*U,V(V(V(V(V(r,R(j[0]*U,S[E])),R(j[1]*U,u)),R(j[2]*U,c)),R(j[3]*U,a)),R(j[4]*U,f))),d=V(V(V(V(V(r,R(S[E],U*_[0])),R(c,U*_[2])),R(a,U*_[3])),R(f,U*_[4])),R(h,U*_[5])),p=n(e+U,d),l=V(V(V(V(V(R(S[E],U*L[0]),R(c,U*L[2])),R(a,U*L[3])),R(f,U*L[4])),R(h,U*L[5])),R(p,U*L[6])),g="number"==typeof l?C(l):F(l),g>i){if(U=.2*U*D(i/g,.25),e+U===e){Y.msg="Step size became too small";break}}else{if(P[E]=V(V(V(V(V(V(r,R(S[E],U*I[0])),R(c,U*I[2])),R(a,U*I[3])),R(f,U*I[4])),R(h,U*I[5])),R(p,U*I[6])),++E,w[E]=e+U,b[E]=d,S[E]=p,"function"==typeof s){var z,Q,H=e,W=e+.5*U;if(v=s(W,P[E-1]),x=X(B(y,0),B(0,v)),N(x)||(H=W,W=e+U,y=v,v=s(W,d),x=X(B(y,0),B(0,v))),N(x)){for(var G,Z,J=0,K=1,et=1;;){if("number"==typeof y)Q=(et*v*H-K*y*W)/(et*v-K*y);else for(Q=W,m=y.length-1;-1!==m;--m)y[m]<0&&v[m]>0&&(Q=O(Q,(et*v[m]*H-K*y[m]*W)/(et*v[m]-K*y[m])));if(H>=Q||Q>=W)break;z=Y._at(Q,E-1),Z=s(Q,z),G=X(B(y,0),B(0,Z)),N(G)?(W=Q,v=Z,x=G,et=1,-1===J?K*=.5:K=1,J=-1):(H=Q,y=Z,K=1,1===J?et*=.5:et=1,J=1)}return d=Y._at(.5*(e+Q),E-1),Y.f[E]=n(Q,z),Y.x[E]=Q,Y.y[E]=z,Y.ymid[E-1]=d,Y.events=x,Y.iterations=q,Y}}e+=U,r=d,y=v,U=O(.8*U*D(i/g,.25),4*U)}return Y.iterations=q,Y},numeric.LU=function(e,t){t=t||!1;var r,n,i,o,s,u,c,a,f,h=Math.abs,p=e.length,l=p-1,m=new Array(p);for(t||(e=numeric.clone(e)),i=0;p>i;++i){for(c=i,u=e[i],f=h(u[i]),n=i+1;p>n;++n)o=h(e[n][i]),o>f&&(f=o,c=n);for(m[i]=c,c!=i&&(e[i]=e[c],e[c]=u,u=e[i]),s=u[i],r=i+1;p>r;++r)e[r][i]/=s;for(r=i+1;p>r;++r){for(a=e[r],n=i+1;l>n;++n)a[n]-=a[i]*u[n],++n,a[n]-=a[i]*u[n];n===l&&(a[n]-=a[i]*u[n])}}return{LU:e,P:m}},numeric.LUsolve=function(e,t){var r,n,i,o,s,u=e.LU,c=u.length,a=numeric.clone(t),f=e.P;for(r=c-1;-1!==r;--r)a[r]=t[r];for(r=0;c>r;++r)for(i=f[r],f[r]!==r&&(s=a[r],a[r]=a[i],a[i]=s),o=u[r],n=0;r>n;++n)a[r]-=a[n]*o[n];for(r=c-1;r>=0;--r){for(o=u[r],n=r+1;c>n;++n)a[r]-=a[n]*o[n];a[r]/=o[r]}return a},numeric.solve=function(e,t,r){return numeric.LUsolve(numeric.LU(e,r),t)},numeric.echelonize=function(e){var t,r,n,i,o,s,u,c,a=numeric.dim(e),f=a[0],h=a[1],p=numeric.identity(f),l=Array(f),m=Math.abs,d=numeric.diveq;for(e=numeric.clone(e),t=0;f>t;++t){for(n=0,o=e[t],s=p[t],r=1;h>r;++r)m(o[n])<m(o[r])&&(n=r);for(l[t]=n,d(s,o[n]),d(o,o[n]),r=0;f>r;++r)if(r!==t){for(u=e[r],c=u[n],i=h-1;-1!==i;--i)u[i]-=o[i]*c;for(u=p[r],i=f-1;-1!==i;--i)u[i]-=s[i]*c}}return{I:p,A:e,P:l}},numeric.__solveLP=function(e,t,r,n,i,o,s){var u,c,a,f,h=numeric.sum,p=(numeric.log,numeric.mul),l=numeric.sub,m=numeric.dot,d=numeric.div,g=numeric.add,y=e.length,v=r.length,x=!1,w=0,b=1,S=(numeric.transpose(t),numeric.svd,numeric.transpose),P=(numeric.leq,Math.sqrt),k=Math.abs,T=(numeric.muleq,numeric.norminf,numeric.any,Math.min),M=numeric.all,A=numeric.gt,j=Array(y),_=Array(v),I=(numeric.rep([v],1),numeric.solve),$=l(r,m(t,o)),L=m(e,e);for(a=w;i>a;++a){var E,U;for(E=v-1;-1!==E;--E)_[E]=d(t[E],$[E]);var q=S(_);for(E=y-1;-1!==E;--E)j[E]=h(q[E]);b=.25*k(L/m(e,j));var V=100*P(L/m(j,j));for((!isFinite(b)||b>V)&&(b=V),f=g(e,p(b,j)),c=m(q,_),E=y-1;-1!==E;--E)c[E][E]+=1;U=I(c,d(f,b),!0);var R=d($,m(t,U)),O=1;for(E=v-1;-1!==E;--E)R[E]<0&&(O=T(O,-.999*R[E]));if(u=l(o,p(U,O)),$=l(r,m(t,u)),!M(A($,0)))return{solution:o,message:"",iterations:a};if(o=u,n>b)return{solution:u,message:"",iterations:a};if(s){var C=m(e,f),F=m(t,f);for(x=!0,E=v-1;-1!==E;--E)if(C*F[E]<0){x=!1;break}}else x=o[y-1]>=0?!1:!0;if(x)return{solution:u,message:"Unbounded",iterations:a}}return{solution:o,message:"maximum iteration count exceeded",iterations:a}},numeric._solveLP=function(e,t,r,n,i){var o,s=e.length,u=r.length,c=(numeric.sum,numeric.log,numeric.mul,numeric.sub),a=numeric.dot,f=(numeric.div,numeric.add,numeric.rep([s],0).concat([1])),h=numeric.rep([u,1],-1),p=numeric.blockMatrix([[t,h]]),l=r,o=numeric.rep([s],0).concat(Math.max(0,numeric.sup(numeric.neg(r)))+1),m=numeric.__solveLP(f,p,l,n,i,o,!1),d=numeric.clone(m.solution);d.length=s;var g=numeric.inf(c(r,a(t,d)));if(0>g)return{solution:0/0,message:"Infeasible",iterations:m.iterations};var y=numeric.__solveLP(e,t,r,n,i-m.iterations,d,!0);return y.iterations+=m.iterations,y},numeric.solveLP=function(e,t,r,n,i,o,s){if("undefined"==typeof s&&(s=1e3),"undefined"==typeof o&&(o=numeric.epsilon),"undefined"==typeof n)return numeric._solveLP(e,t,r,o,s);var u,c=n.length,a=n[0].length,f=t.length,h=numeric.echelonize(n),p=numeric.rep([a],0),l=h.P,m=[];for(u=l.length-1;-1!==u;--u)p[l[u]]=1;for(u=a-1;-1!==u;--u)0===p[u]&&m.push(u);var d=numeric.getRange,g=numeric.linspace(0,c-1),y=numeric.linspace(0,f-1),v=d(n,g,m),x=d(t,y,l),w=d(t,y,m),b=numeric.dot,S=numeric.sub,P=b(x,h.I),k=S(w,b(P,v)),T=S(r,b(P,i)),M=Array(l.length),A=Array(m.length);for(u=l.length-1;-1!==u;--u)M[u]=e[l[u]];for(u=m.length-1;-1!==u;--u)A[u]=e[m[u]];var j=S(A,b(M,b(h.I,v))),_=numeric._solveLP(j,k,T,o,s),I=_.solution;if(I!==I)return _;var $=b(h.I,S(i,b(v,I))),L=Array(e.length);for(u=l.length-1;-1!==u;--u)L[l[u]]=$[u];for(u=m.length-1;-1!==u;--u)L[m[u]]=I[u];return{solution:L,message:_.message,iterations:_.iterations}},numeric.MPStoLP=function(e){function t(t){throw new Error("MPStoLP: "+t+"\nLine "+r+": "+e[r]+"\nCurrent state: "+u[s]+"\n")}e instanceof String&&e.split("\n");var r,n,i,o,s=0,u=["Initial state","NAME","ROWS","COLUMNS","RHS","BOUNDS","ENDATA"],c=e.length,a=0,f={},h=[],p=0,l={},m=0,d=[],g=[],y=[];for(r=0;c>r;++r){i=e[r];var v=i.match(/\S*/g),x=[];for(n=0;n<v.length;++n)""!==v[n]&&x.push(v[n]);if(0!==x.length){for(n=0;n<u.length&&i.substr(0,u[n].length)!==u[n];++n);if(n<u.length){if(s=n,1===n&&(o=x[1]),6===n)return{name:o,c:d,A:numeric.transpose(g),b:y,rows:f,vars:l}}else switch(s){case 0:case 1:t("Unexpected line");case 2:switch(x[0]){case"N":0===a?a=x[1]:t("Two or more N rows");break;case"L":f[x[1]]=p,h[p]=1,y[p]=0,++p;break;case"G":f[x[1]]=p,h[p]=-1,y[p]=0,++p;break;case"E":f[x[1]]=p,h[p]=0,y[p]=0,++p;break;default:t("Parse error "+numeric.prettyPrint(x))}break;case 3:l.hasOwnProperty(x[0])||(l[x[0]]=m,d[m]=0,g[m]=numeric.rep([p],0),++m);var w=l[x[0]];for(n=1;n<x.length;n+=2)if(x[n]!==a){var b=f[x[n]];g[w][b]=(h[b]<0?-1:1)*parseFloat(x[n+1])}else d[w]=parseFloat(x[n+1]);break;case 4:for(n=1;n<x.length;n+=2)y[f[x[n]]]=(h[f[x[n]]]<0?-1:1)*parseFloat(x[n+1]);break;case 5:break;case 6:t("Internal error")}}}t("Reached end of file without ENDATA")},numeric.seedrandom={pow:Math.pow,random:Math.random},function(e,t,r,n,i,o,s){function u(e){var t,n,i=this,o=e.length,s=0,u=i.i=i.j=i.m=0;for(i.S=[],i.c=[],o||(e=[o++]);r>s;)i.S[s]=s++;for(s=0;r>s;s++)t=i.S[s],u=f(u+t+e[s%o]),n=i.S[u],i.S[s]=n,i.S[u]=t;i.g=function(e){var t=i.S,n=f(i.i+1),o=t[n],s=f(i.j+o),u=t[s];t[n]=u,t[s]=o;for(var c=t[f(o+u)];--e;)n=f(n+1),o=t[n],s=f(s+o),u=t[s],t[n]=u,t[s]=o,c=c*r+t[f(o+u)];return i.i=n,i.j=s,c},i.g(r)}function c(e,t,r,n,i){if(r=[],i=typeof e,t&&"object"==i)for(n in e)if(n.indexOf("S")<5)try{r.push(c(e[n],t-1))}catch(o){}return r.length?r:e+("string"!=i?"\x00":"")}function a(e,t,r,n){for(e+="",r=0,n=0;n<e.length;n++)t[f(n)]=f((r^=19*t[f(n)])+e.charCodeAt(n));e="";for(n in t)e+=String.fromCharCode(t[n]);return e}function f(e){return e&r-1}t.seedrandom=function(f,h){var p,l=[];return f=a(c(h?[f,e]:arguments.length?f:[(new Date).getTime(),e,window],3),l),p=new u(l),a(p.S,e),t.random=function(){for(var e=p.g(n),t=s,u=0;i>e;)e=(e+u)*r,t*=r,u=p.g(1);for(;e>=o;)e/=2,t/=2,u>>>=1;return(e+u)/t},f},s=t.pow(r,n),i=t.pow(2,i),o=2*i,a(t.random(),e)}([],numeric.seedrandom,256,6,52),function(e){function t(e){if("object"!=typeof e)return e;var r,n=[],i=e.length;for(r=0;i>r;r++)n[r+1]=t(e[r]);return n}function r(e){if("object"!=typeof e)return e;var t,n=[],i=e.length;for(t=1;i>t;t++)n[t-1]=r(e[t]);return n}function n(e,t,r){var n,i,o,s,u;for(o=1;r>=o;o+=1){for(e[o][o]=1/e[o][o],u=-e[o][o],n=1;o>n;n+=1)e[n][o]=u*e[n][o];if(s=o+1,s>r)break;for(i=s;r>=i;i+=1)for(u=e[o][i],e[o][i]=0,n=1;o>=n;n+=1)e[n][i]=e[n][i]+u*e[n][o]}}function i(e,t,r,n){var i,o,s,u;for(o=1;r>=o;o+=1){for(u=0,i=1;o>i;i+=1)u+=e[i][o]*n[i];n[o]=(n[o]-u)/e[o][o]}for(s=1;r>=s;s+=1)for(o=r+1-s,n[o]=n[o]/e[o][o],u=-n[o],i=1;o>i;i+=1)n[i]=n[i]+u*e[i][o]}function o(e,t,r,n){var i,o,s,u,c,a;for(o=1;r>=o;o+=1){if(n[1]=o,a=0,s=o-1,1>s){if(a=e[o][o]-a,0>=a)break;e[o][o]=Math.sqrt(a)}else{for(u=1;s>=u;u+=1){for(c=e[u][o],i=1;u>i;i+=1)c-=e[i][o]*e[i][u];c/=e[u][u],e[u][o]=c,a+=c*c}if(a=e[o][o]-a,0>=a)break;e[o][o]=Math.sqrt(a)}n[1]=0}}function s(e,t,r,s,u,c,a,f,h,p,l,m,d,g,y,v){function x(){for(g[1]=g[1]+1,M=E,k=1;p>=k;k+=1){for(M+=1,C=-f[k],T=1;s>=T;T+=1)C+=a[T][k]*u[T];if(Math.abs(C)<Q&&(C=0),k>l)y[M]=C;else if(y[M]=-Math.abs(C),C>0){for(T=1;s>=T;T+=1)a[T][k]=-a[T][k];f[k]=-f[k]}}for(k=1;d>=k;k+=1)y[E+m[k]]=0;for(q=0,O=0,k=1;p>=k;k+=1)y[E+k]<O*y[R+k]&&(q=k,O=y[E+k]/y[R+k]);return 0===q?999:0}function w(){for(k=1;s>=k;k+=1){for(C=0,T=1;s>=T;T+=1)C+=e[T][k]*a[T][q];y[k]=C}for(A=I,k=1;s>=k;k+=1)y[A+k]=0;for(T=d+1;s>=T;T+=1)for(k=1;s>=k;k+=1)y[A+k]=y[A+k]+e[k][T]*y[T];for(Y=!0,k=d;k>=1;k-=1){for(C=y[k],M=L+k*(k+3)/2,A=M-k,T=k+1;d>=T;T+=1)C-=y[M]*y[$+T],M+=T;if(C/=y[A],y[$+k]=C,m[k]<l)break;if(0>C)break;Y=!1,_=k}if(!Y)for(F=y[U+_]/y[$+_],k=1;d>=k&&!(m[k]<l)&&!(y[$+k]<0);k+=1)O=y[U+k]/y[$+k],F>O&&(F=O,_=k);for(C=0,k=I+1;I+s>=k;k+=1)C+=y[k]*y[k];if(Math.abs(C)<=Q){if(Y)return v[1]=1,999;for(k=1;d>=k;k+=1)y[U+k]=y[U+k]-F*y[$+k];return y[U+d+1]=y[U+d+1]+F,700}for(C=0,k=1;s>=k;k+=1)C+=y[I+k]*a[k][q];for(D=-y[E+q]/C,z=!0,Y||D>F&&(D=F,z=!1),k=1;s>=k;k+=1)u[k]=u[k]+D*y[I+k],Math.abs(u[k])<Q&&(u[k]=0);for(c[1]=c[1]+D*C*(D/2+y[U+d+1]),k=1;d>=k;k+=1)y[U+k]=y[U+k]-D*y[$+k];if(y[U+d+1]=y[U+d+1]+D,!z){for(C=-f[q],T=1;s>=T;T+=1)C+=u[T]*a[T][q];if(q>l)y[E+q]=C;else if(y[E+q]=-Math.abs(C),C>0){for(T=1;s>=T;T+=1)a[T][q]=-a[T][q];f[q]=-f[q]}return 700}for(d+=1,m[d]=q,M=L+(d-1)*d/2+1,k=1;d-1>=k;k+=1)y[M]=y[k],M+=1;if(d===s)y[M]=y[s];else{for(k=s;k>=d+1&&0!==y[k]&&(N=Math.max(Math.abs(y[k-1]),Math.abs(y[k])),B=Math.min(Math.abs(y[k-1]),Math.abs(y[k])),O=y[k-1]>=0?Math.abs(N*Math.sqrt(1+B*B/(N*N))):-Math.abs(N*Math.sqrt(1+B*B/(N*N))),N=y[k-1]/O,B=y[k]/O,1!==N);k-=1)if(0===N)for(y[k-1]=B*O,T=1;s>=T;T+=1)O=e[T][k-1],e[T][k-1]=e[T][k],e[T][k]=O;else for(y[k-1]=O,X=B/(1+N),T=1;s>=T;T+=1)O=N*e[T][k-1]+B*e[T][k],e[T][k]=X*(e[T][k-1]+O)-e[T][k],e[T][k-1]=O;y[M]=y[d]}return 0}function b(){if(M=L+_*(_+1)/2+1,A=M+_,0===y[A])return 798;if(N=Math.max(Math.abs(y[A-1]),Math.abs(y[A])),B=Math.min(Math.abs(y[A-1]),Math.abs(y[A])),O=y[A-1]>=0?Math.abs(N*Math.sqrt(1+B*B/(N*N))):-Math.abs(N*Math.sqrt(1+B*B/(N*N))),N=y[A-1]/O,B=y[A]/O,1===N)return 798;if(0===N){for(k=_+1;d>=k;k+=1)O=y[A-1],y[A-1]=y[A],y[A]=O,A+=k;for(k=1;s>=k;k+=1)O=e[k][_],e[k][_]=e[k][_+1],e[k][_+1]=O}else{for(X=B/(1+N),k=_+1;d>=k;k+=1)O=N*y[A-1]+B*y[A],y[A]=X*(y[A-1]+O)-y[A],y[A-1]=O,A+=k;for(k=1;s>=k;k+=1)O=N*e[k][_]+B*e[k][_+1],e[k][_+1]=X*(e[k][_]+O)-e[k][_+1],e[k][_]=O}return 0}function S(){for(A=M-_,k=1;_>=k;k+=1)y[A]=y[M],M+=1,A+=1;return y[U+_]=y[U+_+1],m[_]=m[_+1],_+=1,d>_?797:0}function P(){return y[U+d]=y[U+d+1],y[U+d+1]=0,m[d]=0,d-=1,g[2]=g[2]+1,0}var k,T,M,A,j,_,I,$,L,E,U,q,V,R,O,C,F,D,N,B,X,Y,z,Q,H,W,G;V=Math.min(s,p),M=2*s+V*(V+5)/2+2*p+1,Q=1e-60;do Q+=Q,H=1+.1*Q,W=1+.2*Q;while(1>=H||1>=W);for(k=1;s>=k;k+=1)y[k]=t[k];for(k=s+1;M>=k;k+=1)y[k]=0;for(k=1;p>=k;k+=1)m[k]=0;if(j=[],0===v[1]){if(o(e,r,s,j),0!==j[1])return void(v[1]=2);i(e,r,s,t),n(e,r,s)}else{for(T=1;s>=T;T+=1)for(u[T]=0,k=1;T>=k;k+=1)u[T]=u[T]+e[k][T]*t[k];for(T=1;s>=T;T+=1)for(t[T]=0,k=T;s>=k;k+=1)t[T]=t[T]+e[T][k]*u[k]}for(c[1]=0,T=1;s>=T;T+=1)for(u[T]=t[T],c[1]=c[1]+y[T]*u[T],y[T]=0,k=T+1;s>=k;k+=1)e[k][T]=0;for(c[1]=-c[1]/2,v[1]=0,I=s,$=I+s,U=$+V,L=U+V+1,E=L+V*(V+1)/2,R=E+p,k=1;p>=k;k+=1){for(C=0,T=1;s>=T;T+=1)C+=a[T][k]*a[T][k];y[R+k]=Math.sqrt(C)}for(d=0,g[1]=0,g[2]=0,G=0;;){if(G=x(),999===G)return;for(;;){if(G=w(),0===G)break;if(999===G)return;if(700===G)if(_===d)P();else{for(;;)if(b(),G=S(),797!==G)break;P()}}}}function u(e,n,i,o,u,c){e=t(e),n=t(n),i=t(i);var a,f,h,p,l,m,d=[],g=[],y=[],v=[],x=[];if(u=u||0,c=c?t(c):[void 0,0],o=o?t(o):[],f=e.length-1,h=i[1].length-1,!o)for(a=1;h>=a;a+=1)o[a]=0;for(a=1;h>=a;a+=1)g[a]=0;for(p=0,l=Math.min(f,h),a=1;f>=a;a+=1)y[a]=0;for(d[1]=0,a=1;2*f+l*(l+5)/2+2*h+1>=a;a+=1)v[a]=0;for(a=1;2>=a;a+=1)x[a]=0;return s(e,n,f,f,y,d,i,o,f,h,u,g,p,x,v,c),m="",1===c[1]&&(m="constraints are inconsistent, no solution!"),2===c[1]&&(m="matrix D in quadratic function is not positive definite!"),{solution:r(y),value:r(d),unconstrained_solution:r(n),iterations:r(x),iact:r(g),message:m}}e.solveQP=u}(numeric),numeric.svd=function(e){function t(e,t){return e=Math.abs(e),t=Math.abs(t),e>t?e*Math.sqrt(1+t*t/e/e):0==t?e:t*Math.sqrt(1+e*e/t/t)}var r,n=numeric.epsilon,i=1e-64/n,o=50,s=0,u=0,c=0,a=0,f=0,h=numeric.clone(e),p=h.length,l=h[0].length;if(l>p)throw"Need more rows than columns";var m=new Array(l),d=new Array(l);for(u=0;l>u;u++)m[u]=d[u]=0;var g=numeric.rep([l,l],0),y=0,v=0,x=0,w=0,b=0,S=0,P=0;for(u=0;l>u;u++){for(m[u]=v,P=0,f=u+1,c=u;p>c;c++)P+=h[c][u]*h[c][u];if(i>=P)v=0;else for(y=h[u][u],v=Math.sqrt(P),y>=0&&(v=-v),x=y*v-P,h[u][u]=y-v,c=f;l>c;c++){for(P=0,a=u;p>a;a++)P+=h[a][u]*h[a][c];for(y=P/x,a=u;p>a;a++)h[a][c]+=y*h[a][u]}for(d[u]=v,P=0,c=f;l>c;c++)P+=h[u][c]*h[u][c];if(i>=P)v=0;else{for(y=h[u][u+1],v=Math.sqrt(P),y>=0&&(v=-v),x=y*v-P,h[u][u+1]=y-v,c=f;l>c;c++)m[c]=h[u][c]/x;for(c=f;p>c;c++){for(P=0,a=f;l>a;a++)P+=h[c][a]*h[u][a];for(a=f;l>a;a++)h[c][a]+=P*m[a]}}b=Math.abs(d[u])+Math.abs(m[u]),b>w&&(w=b)}for(u=l-1;-1!=u;u+=-1){if(0!=v){for(x=v*h[u][u+1],c=f;l>c;c++)g[c][u]=h[u][c]/x;for(c=f;l>c;c++){for(P=0,a=f;l>a;a++)P+=h[u][a]*g[a][c];for(a=f;l>a;a++)g[a][c]+=P*g[a][u]}}for(c=f;l>c;c++)g[u][c]=0,g[c][u]=0;g[u][u]=1,v=m[u],f=u}for(u=l-1;-1!=u;u+=-1){for(f=u+1,v=d[u],c=f;l>c;c++)h[u][c]=0;if(0!=v){for(x=h[u][u]*v,c=f;l>c;c++){for(P=0,a=f;p>a;a++)P+=h[a][u]*h[a][c];for(y=P/x,a=u;p>a;a++)h[a][c]+=y*h[a][u]}for(c=u;p>c;c++)h[c][u]=h[c][u]/v}else for(c=u;p>c;c++)h[c][u]=0;h[u][u]+=1}for(n*=w,a=l-1;-1!=a;a+=-1)for(var k=0;o>k;k++){var T=!1;for(f=a;-1!=f;f+=-1){if(Math.abs(m[f])<=n){T=!0;break}if(Math.abs(d[f-1])<=n)break}if(!T){s=0,P=1;var M=f-1;for(u=f;a+1>u&&(y=P*m[u],m[u]=s*m[u],!(Math.abs(y)<=n));u++)for(v=d[u],x=t(y,v),d[u]=x,s=v/x,P=-y/x,c=0;p>c;c++)b=h[c][M],S=h[c][u],h[c][M]=b*s+S*P,h[c][u]=-b*P+S*s}if(S=d[a],f==a){if(0>S)for(d[a]=-S,c=0;l>c;c++)g[c][a]=-g[c][a];break}if(k>=o-1)throw"Error: no convergence.";for(w=d[f],b=d[a-1],v=m[a-1],x=m[a],y=((b-S)*(b+S)+(v-x)*(v+x))/(2*x*b),v=t(y,1),y=0>y?((w-S)*(w+S)+x*(b/(y-v)-x))/w:((w-S)*(w+S)+x*(b/(y+v)-x))/w,s=1,P=1,u=f+1;a+1>u;u++){for(v=m[u],b=d[u],x=P*v,v=s*v,S=t(y,x),m[u-1]=S,s=y/S,P=x/S,y=w*s+v*P,v=-w*P+v*s,x=b*P,b*=s,c=0;l>c;c++)w=g[c][u-1],S=g[c][u],g[c][u-1]=w*s+S*P,g[c][u]=-w*P+S*s;for(S=t(y,x),d[u-1]=S,s=y/S,P=x/S,y=s*v+P*b,w=-P*v+s*b,c=0;p>c;c++)b=h[c][u-1],S=h[c][u],h[c][u-1]=b*s+S*P,h[c][u]=-b*P+S*s}m[f]=0,m[a]=y,d[a]=w}for(u=0;u<d.length;u++)d[u]<n&&(d[u]=0);for(u=0;l>u;u++)for(c=u-1;c>=0;c--)if(d[c]<d[u]){for(s=d[c],d[c]=d[u],d[u]=s,a=0;a<h.length;a++)r=h[a][u],h[a][u]=h[a][c],h[a][c]=r;for(a=0;a<g.length;a++)r=g[a][u],g[a][u]=g[a][c],g[a][c]=r;u=c}return{U:h,S:d,V:g}}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1]);